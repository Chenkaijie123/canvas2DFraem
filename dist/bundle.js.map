{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/canvasDOM/DOM/CDOMContainer.ts","webpack:///./src/canvasDOM/DOM/CDocument.ts","webpack:///./src/canvasDOM/DOM/CImage.ts","webpack:///./src/canvasDOM/DOM/DOMBase.ts","webpack:///./src/canvasDOM/event/DOMEvent.ts","webpack:///./src/canvasDOM/event/Event.ts","webpack:///./src/canvasDOM/event/EventDispatch.ts","webpack:///./src/canvasDOM/event/TouchEvent.ts","webpack:///./src/canvasDOM/global/PlugC.ts","webpack:///./src/canvasDOM/math/Box.ts","webpack:///./src/canvasDOM/math/Matrix.ts","webpack:///./src/canvasDOM/math/Point.ts","webpack:///./src/canvasDOM/math/TransformMatrix.ts","webpack:///./src/index.ts","webpack:///./src/mgr/GlobalMgr.ts","webpack:///./src/sourceModel/SourceMgr.ts","webpack:///./src/sourceModel/loader/FileLoader.ts","webpack:///./src/sourceModel/loader/ImgLoader.ts"],"names":[],"mappings":"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","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/index.ts\");\n","import {DOMBase,DOMContainer} from \"./DOMBase\"\r\n/**容器类 */\r\nexport default class CDOMContainer extends DOMBase implements DOMContainer{\r\n    public parent:DOMContainer\r\n    public children:DOMBase[] = [];\r\n    public appendChild(child:DOMBase):this{\r\n        if(child.parent == this) return this;\r\n        child.removeSelf();\r\n        this.children.push(child);\r\n        child.parent = this;\r\n        return this;\r\n    }\r\n    public removeChild(child:DOMBase):this{\r\n        if(child.parent == void 0) return this;\r\n        let index = this.children.indexOf(child)\r\n        this.children.splice(index,1);\r\n        child.parent = null;\r\n        return this;\r\n    }\r\n}","import CDOMContainer from \"./CDOMContainer\"\r\nimport { DOMBase } from \"./DOMBase\"\r\nimport DOMEvent from \"../event/DOMEvent\";\r\n/**虚拟文本 */\r\nexport default class CDocument extends CDOMContainer {\r\n    private reRenderDeep: number;//需要重新渲染的深度\r\n    public canvas: HTMLCanvasElement\r\n    private context: CanvasRenderingContext2D;\r\n    constructor() {\r\n        super();\r\n        this.parent = null;\r\n    }\r\n\r\n    private initCanvas(): void {\r\n        let canvas = document.createElement(\"canvas\");\r\n        this.canvas = canvas\r\n        canvas.width = 1000;\r\n        canvas.height = 600;\r\n        canvas.id = \"canvas\"\r\n        new DOMEvent(this);\r\n        document.body.appendChild(canvas);\r\n        this.context = canvas.getContext(\"2d\");\r\n    }\r\n\r\n    public init(): void {\r\n        super.init();\r\n        this.initCanvas();\r\n        this.deep = 1;\r\n    }\r\n\r\n    public iterator<T>(loot: Array<DOMBase>, fn: (e: DOMBase) => T): T[] {\r\n        let res = [];\r\n        for (let i: number = 0, e: any; e = loot[i]; i++) {\r\n            res.push(fn(e))\r\n            if (e[\"children\"]) {\r\n                res.push(...this.iterator(e[\"children\"], fn));\r\n            }\r\n        }\r\n        return res;\r\n    }\r\n\r\n\r\n\r\n    public getElementById(id: string): DOMBase {\r\n        let loop = this.children;\r\n        return (this.iterator<DOMBase>(loop, (e) => { return e })[0])\r\n    }\r\n\r\n    public getElementsByClassName(id: string): DOMBase[] {\r\n        return\r\n    }\r\n\r\n    //判断重新渲染深度\r\n    public changeReRenderDeep(deep: number): void {\r\n        this.reRenderDeep = this.reRenderDeep > deep ? deep : this.reRenderDeep;\r\n    }\r\n\r\n    //内部计算并且渲染\r\n    public sysRender(): void {\r\n        //todo\r\n        this.context.setTransform(1, 0, 0, 1, 0, 0)\r\n        this.context.clearRect(0, 0, this.canvas.width, this.canvas.height)\r\n        let loot = this.children;\r\n        let fn = (e: DOMBase) => {\r\n            //重新计算需要重绘的数据\r\n            if (e.reRender) {\r\n                let style = e.style\r\n                e.matrix.setByStyle(style);//转换矩阵\r\n                e.reRender = false;\r\n            }\r\n            if (e.parent instanceof CDocument) {\r\n                this.context.setTransform(...e.matrix.value());\r\n            } else {\r\n                this.context.transform(...e.matrix.value());\r\n            }\r\n            e.render(this.context);\r\n        }\r\n        // let t = Date.now()\r\n        this.iterator(loot, fn);\r\n        // console.log(Date.now() - t)\r\n    }\r\n\r\n    public renderElement():void{\r\n        let ctx = this.context;\r\n        ctx.setTransform(1, 0, 0, 1, 0, 0)\r\n        ctx.clearRect(0, 0, this.canvas.width, this.canvas.height)\r\n        this.renderList( this.children)\r\n    }\r\n\r\n    public renderList(nodes: DOMBase[]): void {\r\n        let ctx = this.context;\r\n        for (let i of nodes) {\r\n            if (i.reRender) {\r\n                let style = i.style\r\n                i.matrix.setByStyle(style);//转换矩阵\r\n                i.reRender = false;\r\n            }\r\n            if (!i.style.visible || !i.style.alpha || i.matrix.a == 0 && i.matrix.b == 0 || i.matrix.c == 0 && i.matrix.d == 0) continue;\r\n            if (i.parent instanceof CDocument) {\r\n                ctx.setTransform(...i.matrix.value());\r\n            } else {\r\n                ctx.transform(...i.matrix.value());\r\n            }\r\n            if (i.style.clip) {\r\n                let clip = i.style.clip\r\n                if (clip.width <= 0 || clip.height <= 0) continue;\r\n                ctx.save();\r\n                ctx.rect(clip.x,clip.y,clip.width,clip.height);\r\n                ctx.clip();\r\n                i.render(ctx);\r\n                if(i[\"children\"]){\r\n                    this.renderList(i[\"children\"])\r\n                }\r\n                ctx.restore();\r\n            }else{\r\n                i.render(ctx);\r\n                if(i[\"children\"]){\r\n                    this.renderList(i[\"children\"])\r\n                }\r\n            }\r\n        }\r\n    }\r\n}","import {DOMBase} from \"./DOMBase\"\r\nimport { resource } from \"../../mgr/GlobalMgr\";\r\nimport { ImgLoader } from \"../../sourceModel/loader/ImgLoader\";\r\nexport default class CImage extends DOMBase{\r\n    private _src:string\r\n    public treasure:HTMLImageElement;\r\n    public get src():string{\r\n        return this._src;\r\n    }\r\n\r\n    public set src(url:string){\r\n        if(this._src != url){\r\n            this.treasure = null;\r\n            let loader = ImgLoader.create();\r\n            loader.once(ImgLoader.LOAD_COMPLETE,(e)=>{\r\n                this.treasure = e.data;\r\n                this.style.width = this.treasure.width;\r\n                this.style.height = this.treasure.height;\r\n                loader.release();\r\n            },this)\r\n            loader.load(url);\r\n        }\r\n    }\r\n\r\n    constructor(){\r\n        super();\r\n        this.type = \"CImage\";\r\n        // this.treasure = new Image();\r\n    }\r\n    public render(ctx:CanvasRenderingContext2D):void{\r\n        let img = this.treasure;\r\n        if(!img) return;\r\n        ctx.drawImage(img,0,0);\r\n        \r\n    }\r\n\r\n\r\n}\r\n\r\n","import TransformMatrix from \"../math/TransformMatrix\";\r\nimport Point from \"../math/Point\";\r\nimport Matrix from \"../math/Matrix\";\r\nimport EventDispatch from \"../event/EventDispatch\";\r\nimport Box from \"../math/Box\";\r\n\r\n/**\r\n * 基础DOM\r\n */\r\nlet hashCode: number = 0;\r\nexport abstract class DOMBase extends EventDispatch{\r\n    public type: string\r\n    public _style: DOMStyleBase\r\n    public className: string\r\n    public id: string\r\n    public parent: DOMContainer\r\n\r\n    public reRender: boolean;//重绘标志\r\n    protected proxy: DOMStyleBase\r\n    protected deep: number\r\n    public matrix: TransformMatrix\r\n    // public position: Point;//全局坐标\r\n    public hashCode: number\r\n    public get style() {\r\n        return this.proxy;\r\n    }\r\n    public set style(v) {\r\n        this._style = v;\r\n    }\r\n    //留下的扩展接口\r\n    protected proxyHandle: Function = <k extends keyof DOMStyleBase>(target: DOMStyleBase, key: k, newData: DOMStyleBase[k], proxy: DOMStyleBase) => { }\r\n    constructor() {\r\n        super();\r\n        this.hashCode = hashCode++\r\n        this.init();\r\n        let self = this;\r\n        this.proxy = new Proxy(this._style, {\r\n            set<k extends keyof DOMStyleBase>(target: DOMStyleBase, key: k, newData: DOMStyleBase[k], proxy: DOMStyleBase): any {\r\n                if (target[key] != newData) {\r\n                    target[key] = newData;\r\n                    if (!self.reRender) self.reRender = true;\r\n                    self.proxyHandle(target, key, newData, proxy);\r\n\r\n                }\r\n                return true\r\n            }\r\n        })\r\n\r\n    }\r\n\r\n\r\n    public appendTo(parent: DOMContainer): this {\r\n        parent.appendChild(this);\r\n        return this;\r\n    }\r\n    public removeSelf(): this {\r\n        if (this.parent) {\r\n            this.parent.removeChild(this);\r\n            return this;\r\n        }\r\n    }\r\n\r\n\r\n\r\n    //判断是否重绘\r\n    public checkReRender(): boolean {\r\n        return this.reRender = true;\r\n    }\r\n\r\n    protected init(): void {\r\n        this.style = {\r\n            x: 0,\r\n            y: 0,\r\n            scaleX: 1,\r\n            scaleY: 1,\r\n            visible: true,\r\n            alpha: 1,\r\n            width: 0,\r\n            height: 0,\r\n            anchorX: 0,\r\n            anchorY: 0,\r\n            rotate: 0,\r\n            skewX: 0,\r\n            skewY: 0,\r\n            clip:null\r\n        }\r\n        this.reRender = true;\r\n        this.matrix = TransformMatrix.createTransFormMatrix();\r\n        // this.position = Point.createPiont();\r\n    }\r\n\r\n    protected reset(): void {\r\n\r\n    }\r\n\r\n    public render(ctx: CanvasRenderingContext2D): void { }\r\n\r\n    /**\r\n     * 把处于当前坐标系的point点装换为全局的坐标\r\n     * @param point \r\n     */\r\n    public toGlobal(point: Point): Point {\r\n        let matrix = this.getMatrixMul();\r\n        matrix.invertMartix();\r\n        matrix.transFormPoint(point);\r\n        matrix.release();\r\n        return point;\r\n    }\r\n\r\n\r\n\r\n    public contain(_x: number, _y: number): boolean {\r\n        let { width, height } = this.style\r\n        return _x >= 0 && width >= _x && _y >= 0 && height >= _y\r\n    }\r\n\r\n    /**\r\n     * 获取该对象当前的转化矩阵\r\n     */\r\n    public getMatrixMul(): TransformMatrix {\r\n        let temp: TransformMatrix[] = [this.matrix]\r\n        let t: DOMBase = this;\r\n        while (t.parent) {\r\n            t = t.parent;\r\n            if (t.reRender) {\r\n                t.matrix.setByStyle(t.style);//转换矩阵\r\n                t.reRender = false;\r\n            }\r\n            temp.push(t.matrix)\r\n        }\r\n        let matrix = temp.pop().clone();\r\n        let m: TransformMatrix;\r\n        while (m = temp.pop()) {\r\n            matrix.MatrixMulti(m)\r\n        }\r\n        return matrix;\r\n    }\r\n}\r\n\r\n// interface DOMType {\r\n//     CDocument: string\r\n//     DOMBase: string\r\n//     CImage: string\r\n// }\r\n\r\n\r\nexport interface DOMStyleBase {\r\n    x: number\r\n    y: number\r\n    scaleX: number\r\n    scaleY: number\r\n    visible: boolean\r\n    alpha: number\r\n    width: number\r\n    height: number\r\n    anchorX: number\r\n    anchorY: number\r\n    rotate: number\r\n    skewX: number\r\n    skewY: number\r\n    clip:Box\r\n}\r\n\r\n// interface DOMStyleBaseKeyOf{\r\n//     \"x\":number\r\n//     \"y\":number\r\n//     \"scaleX\":number\r\n//     \"scaleY\":number\r\n//     \"visible\":boolean\r\n//     \"alpha\":number\r\n//     \"width\":number\r\n//     \"height\":number\r\n// }\r\n\r\n/**可以添加其上的DOM节点 */\r\nexport interface DOMContainer extends DOMBase {\r\n    parent: DOMContainer\r\n    children: DOMBase[]\r\n    appendChild(child: DOMBase): this\r\n    removeChild(child: DOMBase): this\r\n}","import { DOMBase } from \"../DOM/DOMBase\";\r\nimport { PlugC } from \"./Event\";\r\nimport CDocument from \"../DOM/CDocument\";\r\nimport Point from \"../math/Point\";\r\n/**canvas内部元素点击事件的实现 */\r\nexport default class DOMEvent {\r\n    private document: CDocument\r\n    private beginList: DOMBase[];\r\n    constructor(document: CDocument) {\r\n        this.document = document;\r\n        this.init();\r\n    }\r\n\r\n    public init(): void {\r\n        let canvas = this.document.canvas;\r\n        canvas.addEventListener(\"mousedown\", this.onTapBegin);\r\n        canvas.addEventListener(\"mouseup\", this.onTapEnd);\r\n    }\r\n\r\n    private onTapBegin: (E: MouseEvent) => any = function (e: MouseEvent) {\r\n        let t: DOMEvent = this;\r\n        let canvas = t.document.canvas;\r\n        canvas.removeEventListener(\"mousemove\", t.onMove);\r\n        canvas.addEventListener(\"mousemove\", t.onMove);\r\n        let list = t.getDOM(e);\r\n        let { clientX, clientY } = e;\r\n        t.beginList = list;\r\n        let item: DOMBase, evt: PlugC.Event, index: number = list.length - 1;\r\n        //捕获\r\n        for (; item = list[index]; index--) {\r\n            evt = item.emit(\"tapBegin\", true, item, clientX, clientY);\r\n            if (evt.stopPro) {\r\n                evt.release();\r\n                return;\r\n            }\r\n        }\r\n        //冒泡\r\n        for (index = 0; item = list[index]; index++) {\r\n            evt = item.emit(\"tapBegin\", false, item, clientX, clientY);\r\n            if (evt.stopPro) {\r\n                evt.release();\r\n                return;\r\n            }\r\n        }\r\n    }.bind(this);\r\n\r\n    private onTapEnd: (e: MouseEvent) => any = function (e: MouseEvent) {\r\n        let t: DOMEvent = this;\r\n        let canvas = t.document.canvas;\r\n        canvas.removeEventListener(\"mousemove\", t.onMove);\r\n        let list = t.getDOM(e);\r\n        let { clientX, clientY } = e;\r\n        let beginList = t.beginList;\r\n        let index: number = list.length - 1;\r\n        //抬起事件捕获\r\n        for (let DOM: DOMBase, evt: PlugC.Event; DOM = list[index]; index--) {\r\n            evt = DOM.emit(\"tapEnd\", true, DOM, clientX, clientY)\r\n            if (beginList.indexOf(DOM) != -1) {\r\n                DOM.emit(\"tap\", true, DOM);\r\n            }\r\n            if (evt.stopPro) {\r\n                evt.release();\r\n                return;\r\n            }\r\n        }\r\n        //抬起事件冒泡\r\n        for (let DOM: DOMBase, evt: PlugC.Event, index = 0; DOM = list[index]; index++) {\r\n            evt = DOM.emit(\"tapEnd\", false, DOM, clientX, clientY)\r\n            if (beginList.indexOf(DOM) != -1) {\r\n                DOM.emit(\"tap\", false, DOM);\r\n            }\r\n            if (evt.stopPro) {\r\n                evt.release();\r\n                return;\r\n            }\r\n        }\r\n        //取消事件捕获\r\n        for (let DOM: DOMBase, evt: PlugC.Event, index = beginList.length - 1; DOM = beginList[index]; index--) {\r\n            if (list.indexOf(DOM) == -1) {\r\n                evt = DOM.emit(\"tapCancel\", true, DOM, clientX, clientY);\r\n                if (evt.stopPro) {\r\n                    evt.release();\r\n                    return;\r\n                }\r\n            }\r\n        }\r\n        //取消事件冒泡\r\n        for (let DOM: DOMBase, evt: PlugC.Event, index = 0; DOM = beginList[index]; index++) {\r\n            if (list.indexOf(DOM) == -1) {\r\n                evt = DOM.emit(\"tapCancel\", false, DOM, clientX, clientY);\r\n                if (evt.stopPro) {\r\n                    evt.release();\r\n                    return;\r\n                }\r\n            }\r\n        }\r\n    }.bind(this);\r\n\r\n    private onMove: (e: MouseEvent) => any = function (e: MouseEvent) {\r\n        let t: DOMEvent = this;\r\n        let list = t.getDOM(e);\r\n        let index: number = list.length - 1;\r\n        let beginList = t.beginList;\r\n        let { clientX, clientY } = e;\r\n        //捕获\r\n        for (let DOM: DOMBase, evt: PlugC.Event; DOM = list[index]; index--) {\r\n            if (beginList.indexOf(DOM) == -1) continue;\r\n            evt = DOM.emit(\"tapMove\", true, DOM, clientX, clientY)\r\n            if (evt.stopPro) {\r\n                evt.release();\r\n                return;\r\n            }\r\n        }\r\n        //冒泡\r\n        for (let DOM: DOMBase, evt: PlugC.Event, index = 0; DOM = list[index]; index++) {\r\n            if (beginList.indexOf(DOM) == -1) continue;\r\n            evt = DOM.emit(\"tapMove\", false, DOM, clientX, clientY)\r\n            if (evt.stopPro) {\r\n                evt.release();\r\n                return;\r\n            }\r\n        }\r\n    }.bind(this);\r\n\r\n    /**获取点击的节点列表 */\r\n    public getDOM(e: MouseEvent): DOMBase[] {\r\n        let x = e.clientX\r\n        let y = e.clientY\r\n        let p = Point.createPiont(x, y);\r\n        let list: DOMBase[] = [];\r\n        this.document.iterator(this.document.children, (v) => {\r\n            if (v.tapCount == 0) return;\r\n            v.toGlobal(p.setPoint(x, y))\r\n            let res = v.contain(p.x, p.y)\r\n            if (res) {\r\n                list.push(v)\r\n            }\r\n        });\r\n        p.release();\r\n        return list;\r\n    }\r\n}","export namespace PlugC{\r\n    let pool:PlugC.Event[] = []\r\n    export class Event{\r\n        public type:string = \"\"\r\n        public target:any;\r\n        public currentTarget:any;\r\n        public data:any;\r\n        // public bubbles:boolean\r\n        public usecapture:boolean\r\n        public stopPro :boolean = false;\r\n        constructor(type:string,usecapture = false){\r\n            this.type = type;\r\n            this.usecapture = usecapture;\r\n            // this.bubbles = !usecapture;\r\n        }\r\n\r\n        public stopPropagation():void{\r\n            this.stopPro = true;\r\n        }\r\n\r\n        public release():void{\r\n            pool.push(this);\r\n        }\r\n        public static create(type:string,usecapture:boolean = false):PlugC.Event{\r\n            let e = pool.pop() ;\r\n            if(e){\r\n                e.type = type;\r\n                e.usecapture = usecapture;\r\n                // e.bubbles = !usecapture;\r\n                e.stopPro = false;\r\n            }else e = new PlugC.Event(type,usecapture);\r\n            return e;\r\n        }\r\n\r\n        public static factoty<T extends PlugC.Event>(type:string,usecapture:boolean = false,clientX = 0,clientY = 0,EventClass?:new(...args:any[])=>T):T{\r\n            let t:any = EventClass? EventClass:this;\r\n            return t.create(type,usecapture,clientX,clientY)\r\n        }\r\n    }\r\n}\r\n","import { PlugC } from \"./Event\";\r\nimport { TapEvent, TapEventMap } from \"./TouchEvent\";\r\nlet id:number = 0;\r\nexport default class EventDispatch {\r\n    /**只有内置点击事件才有冒泡和捕获 */\r\n    private bubblingMap: { [key: string]: Array<[(e?: PlugC.Event) => any, any]> } = {};//冒泡阶段触发\r\n    private captureMap: { [key: string]: Array<[(e?: PlugC.Event) => any, any]> } = {};//捕获阶段触发\r\n    public eventCount:number = 0;\r\n    public tapCount:number = 0;//当前对象监听的点击事件个数\r\n    public hashCode:number\r\n    constructor() {\r\n        this.hashCode = id++;\r\n     }\r\n    public emit(type: string, useCapture = false,target:any = undefined,clientX :number= undefined,clientY:number = undefined):PlugC.Event{\r\n        let map = useCapture ? this.captureMap[type] : this.bubblingMap[type];\r\n        let e = this.createEvent(type,useCapture,clientX,clientY);\r\n        e.currentTarget = this;\r\n        e.target = target;\r\n        if(map){\r\n            let index = 0,item:[(e?: PlugC.Event) => any, any];\r\n            while(item = map[index++]){\r\n                item[0].call(item[1],e)\r\n                if(e.stopPro) break;\r\n            }\r\n        }\r\n        return e;\r\n    }\r\n\r\n    /**触发非内置点击事件的事件 */\r\n    public dispatch(type:string,data?:any):void{\r\n        let map = this.bubblingMap[type];\r\n        if(!map) return;\r\n        let e = PlugC.Event.create(type);\r\n        let index = 0,item:[(e?: PlugC.Event) => any, any];\r\n        e.currentTarget = this;\r\n        e.data = data;\r\n        while(item = map[index++]){\r\n            item[0].call(item[1],e)\r\n            if(e.stopPro) break;\r\n        }\r\n    \r\n    }\r\n\r\n    private createEvent(type: string, useCapture = false,clientX = 0,clientY = 0):PlugC.Event{\r\n        let e:PlugC.Event;\r\n        if(this.checkIsTapEvt(type)) e = TapEvent.create(type as \"tapBegin\" | \"tapEnd\" | \"tapCancel\" | \"tapMove\",useCapture,clientX,clientY)\r\n        else e = PlugC.Event.create(type, useCapture);\r\n        return e;\r\n    }\r\n\r\n\r\n    private checkIsTapEvt(type:string):boolean{\r\n        return type == \"tapBegin\" || type == \"tapEnd\" || type == \"tapCancel\" || type == \"tapMove\";\r\n    }\r\n\r\n    public addEventListener(type: string, fn: (e?: PlugC.Event) => any, caller: any, useCapture: boolean = false): void {\r\n        if (this.hasEvent(type, fn, caller)) return;\r\n        this.eventCount++;\r\n        let map = this.bubblingMap;\r\n        if (!map[type]) map[type] = [[fn, caller]];\r\n        else map[type].push([fn, caller]);\r\n        if(useCapture && this.checkIsTapEvt(type)){\r\n            map = this.captureMap;\r\n            if (!map[type]) map[type] = [[fn, caller]];\r\n            else map[type].push([fn, caller]);\r\n            this.tapCount++;\r\n        }\r\n    }\r\n\r\n    public removeEventListener(type: string, fn: (e?: PlugC.Event) => any, caller: any, useCapture: boolean = false): void {\r\n        let index = this.indexOfEvent(fn,caller,this.bubblingMap[type]);\r\n        if(index != -1){\r\n            this.bubblingMap[type].splice(index,1);\r\n            this.eventCount--;\r\n        }\r\n        index = this.indexOfEvent(fn,caller,this.captureMap[type]);\r\n        if(index != -1){\r\n            this.captureMap[type].splice(index,1);\r\n            if(this.checkIsTapEvt(type)) this.tapCount--;\r\n        }\r\n    }\r\n\r\n    public once(type: string, fn: (e?: PlugC.Event) => any, caller: any, useCapture: boolean = false):void{\r\n        let func = (e: PlugC.Event)=>{\r\n            fn(e);\r\n            this.removeEventListener(type,func,caller,useCapture)\r\n        }\r\n        this.addEventListener(type,func,caller);\r\n    }\r\n\r\n    public on(type: string, fn: (e?: PlugC.Event) => any, caller: any, useCapture: boolean = false): void { \r\n        this.addEventListener(type, fn, caller, useCapture)\r\n    }\r\n\r\n    public off(type: string, fn: (e?: PlugC.Event) => any, caller: any, useCapture: boolean = false): void { \r\n        this.removeEventListener(type, fn, caller, useCapture)\r\n    }\r\n\r\n    public removeAllEvent():void{\r\n        let map = this.bubblingMap\r\n        for(let key in map){\r\n            delete map[key]\r\n        }\r\n        map = this.captureMap;\r\n        for(let key in map){\r\n            delete map[key]\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 判断是否有监听目标事件\r\n     * @param type 事件标识符\r\n     * @param fn 监听函数\r\n     * @param caller 调用者\r\n     */\r\n    public hasEvent(type: string, fn: (e?: PlugC.Event) => any, caller: any): boolean {\r\n        let index = this.indexOfEvent(fn,caller,this.bubblingMap[type]);\r\n        return index != -1;\r\n    }\r\n\r\n    private indexOfEvent(fn: (e?: PlugC.Event) => any, caller: any,list:Array<[(e?: PlugC.Event) => any, any]>):number{\r\n        if(!list || !list.length) return -1;\r\n        for(let item :[(e?: PlugC.Event) => any, any],index = 0;item = list[index];index++){\r\n            if(item[0] == fn && item[1] == caller) return index;\r\n        }\r\n        return -1;\r\n    }\r\n}","import { PlugC } from \"./Event\";\r\nlet pool:TapEvent[] = [];\r\nexport class TapEvent extends PlugC.Event {\r\n    public clientX:number\r\n    public clientY:number\r\n    constructor(type:\"tapBegin\"|\"tapEnd\"|\"tapCancel\"|\"tapMove\",usecapture:boolean = false,clientX = 0,clientY = 0){\r\n        super(type,usecapture);\r\n        this.clientX = clientX;\r\n        this.clientY = clientY;\r\n    }\r\n    public static create<T extends keyof TapEventMap>(type:TapEventMap[T],usecapture:boolean = false,clientX = 0,clientY = 0):TapEvent{\r\n        let e = pool.pop() ;\r\n        if(e){\r\n            e.type = type;\r\n            e.usecapture = usecapture;\r\n            e.stopPro = false;\r\n        }else e = new TapEvent(type,usecapture,clientX,clientY);\r\n        return e;\r\n    }\r\n}\r\n\r\nexport interface TapEventMap{\r\n    TAP_BEGIN:\"tapBegin\"\r\n    TAP_END:\"tapEnd\"\r\n    TAP_CANCEL:\"tapCancel\"\r\n    TAP_MOVE:\"tapMove\"\r\n}\r\n\r\n","export enum SysTem{\r\n    /**文件加载成功 */\r\n    LOAD_COMPLETE = \"LOAD_COMPLETE\",\r\n    /**文件加载失败 */\r\n    LOAD_ERROR = \"LOAD_ERROR\",\r\n    /**文件下载状态改变 */\r\n    READY_STATE_CHANGE = \"READY_STATE_CHANGE\",\r\n}","\r\nimport Matrix from \"./Matrix\"\r\nimport Point from \"./Point\"\r\n/**\r\n * 矩形盒子模型\r\n * [x,y,width,height]\r\n */\r\nlet pool: Array<Box> = [];\r\nexport default class Box extends Matrix {\r\n    public get width(): number {\r\n        return this.c;\r\n    }\r\n\r\n    public set width(v: number) {\r\n        this.c = v;\r\n    }\r\n\r\n    public get height(): number {\r\n        return this.d;\r\n    }\r\n\r\n    public set height(v: number) {\r\n        this.d = v;\r\n    }\r\n\r\n    public get x(): number {\r\n        return this.a;\r\n    }\r\n\r\n    public set x(v: number) {\r\n        this.a = v;\r\n    }\r\n\r\n    public get y(): number {\r\n        return this.b;\r\n    }\r\n\r\n    public set y(v: number) {\r\n        this.b = v;\r\n    }\r\n\r\n    public get value(): [number, number, number, number] {\r\n        return [this.a, this.b, this.c, this.d];\r\n    }\r\n    private constructor(x: number = 0, y: number = 0, width: number = 0, height: number = 0) {\r\n        super(x, y, width, height)\r\n    }\r\n\r\n    public setBox(x: number = 0, y: number = 0, width: number = 0, height: number = 0): void {\r\n        this.setMatrix(x, y, width, height);\r\n    }\r\n    /**回收 */\r\n    public release(): void {\r\n        this.setMatrix();\r\n        pool.push(this);\r\n    }\r\n\r\n    /**\r\n     * 获取两个盒子相交的部分\r\n     * @returns [x,y,width,height]\r\n     */\r\n    public intersect(box: Box): Box {\r\n        if (!Box.isCover(this, box)) return null;\r\n        //取靠右的为基准\r\n        let referenceIdx = this.x >= box.x ? 0 : 1;\r\n        let boxArr = [this, box];\r\n        let [right, left] = [boxArr[referenceIdx], boxArr[1 - referenceIdx]];\r\n        let [x0, y0, x1, y1] = [0, 0, 0, 0];\r\n        x0 = right.x;\r\n        y0 = Math.max(right.y, left.y);\r\n        x1 = Math.min(right.x + right.width, left.x + left.width);\r\n        y1 = Math.min(right.y + right.height, left.y + left.height);\r\n        return Box.createBox(x0, y0, x1 - x0, y1 - y0);\r\n    }\r\n\r\n    /**\r\n     * 获取刚好包围两个盒子的盒子\r\n     * @param box \r\n     */\r\n    public dirtyRect(box: Box): Box {\r\n        return Box.dirtyRect(this, box);\r\n    }\r\n\r\n    /**判断两个矩形是否有相交(碰撞) */\r\n    public static isCover(Box1: Box, Box2: Box): boolean {\r\n        return Box1.x + Box1.width > Box2.x &&\r\n            Box2.x + Box2.width > Box1.x &&\r\n            Box1.y + Box1.height > Box2.y &&\r\n            Box2.y + Box2.height > Box1.y;\r\n    }\r\n\r\n    /**判断点是否在改矩形中 */\r\n    public static pointInside(box: Box, point: Point): boolean {\r\n        return box.x <= point.x &&\r\n            box.y <= point.y &&\r\n            box.x + box.width >= point.x &&\r\n            box.y + box.height >= point.y;\r\n    }\r\n\r\n    /**工厂函数 */\r\n    public static createBox(x: number = 0, y: number = 0, width: number = 0, height: number = 0): Box {\r\n        let box = pool.pop() || new Box();\r\n        box.setBox(x, y, width, height);\r\n        return box;\r\n    }\r\n\r\n    /**获取刚好包围多个盒子的大盒子 */\r\n    public static dirtyRect(...box: Box[]): Box {\r\n        let x0: number = Math.min(...box.map((v) => v.x));\r\n        let y0: number = Math.min(...box.map((v) => v.y));\r\n        let x1: number = Math.max(...box.map((v) => v.x + v.width));\r\n        let y1: number = Math.max(...box.map((v) => v.y + v.height));\r\n        return Box.createBox(x0, y0, x1 - x0, y1 - y0);\r\n    }\r\n}","/**\r\n * 矩阵数据结构\r\n * 用于模拟多种数据\r\n */\r\nexport default class Matrix{\r\n    protected data:[number,number,number,number,number,number]\r\n    constructor(a:number = 0,b:number = 0,c:number = 0,d:number = 0,e:number = 0,f:number = 0){\r\n        this.data = [a,b,c,d,e,f];\r\n    }\r\n    public get a():number{\r\n        return this.data[0]\r\n    }\r\n    public set a(v:number){\r\n         this.data[0] = v;\r\n    }\r\n\r\n    public get b():number{\r\n        return this.data[1]\r\n    }\r\n    public set b(v:number){\r\n         this.data[1] = v;\r\n    }\r\n    public get c():number{\r\n        return this.data[2]\r\n    }\r\n    public set c(v:number){\r\n         this.data[2] = v;\r\n    }\r\n    public get d():number{\r\n        return this.data[3]\r\n    }\r\n    public set d(v:number){\r\n         this.data[3] = v;\r\n    }\r\n    public get e():number{\r\n        return this.data[4]\r\n    }\r\n    public set e(v:number){\r\n         this.data[4] = v;\r\n    }\r\n    public get f():number{\r\n        return this.data[5]\r\n    }\r\n    public set f(v:number){\r\n         this.data[5] = v;\r\n    }\r\n\r\n    public setMatrix(a:number = 0,b:number = 0,c:number = 0,d:number = 0,e:number = 0,f:number = 0):void{\r\n        this.data = [a,b,c,d,e,f];\r\n    }\r\n\r\n    public getMartrix():[number,number,number,number,number,number]{\r\n        return this.data;\r\n    }\r\n\r\n\r\n}","import Matrix  from \"./Matrix\"\r\nlet pool:Array<Point> = [];\r\nexport default class Point extends Matrix{\r\n    private constructor(x:number = 0,y:number = 0){\r\n        super(x,y);\r\n    }\r\n\r\n    public get x():number{\r\n        return this.a;\r\n    }\r\n\r\n    public set x(v:number){\r\n        this.a = v;\r\n    }\r\n\r\n    public get y():number{\r\n        return this.b;\r\n    }\r\n\r\n    public set y(v:number){\r\n        this.b = v;\r\n    }\r\n\r\n    public get value():[number,number]{\r\n        return [this.a,this.b];\r\n    }\r\n\r\n    public setPoint(x:number = 0,y :number = 0):this{\r\n        this.setMatrix(x,y); \r\n        return this;\r\n    }\r\n\r\n    /**回收进对象池 */\r\n    public release():void{\r\n        this.setMatrix();\r\n        pool.push(this);\r\n    }\r\n\r\n    \r\n    public copy(p:Point):this{\r\n        this.data[0] = p.x;\r\n        this.data[1] = p.y;\r\n        return this;\r\n    }\r\n    /**\r\n     * 两点叠加，可实现平移或者坐标系转化\r\n     * @param point \r\n     */\r\n    public add(point:Point):this{\r\n        this.data[0] += point.x;\r\n        this.data[1] += point.y;\r\n        return this;\r\n    }\r\n\r\n    /**创建点对象 */\r\n    public static createPiont(x:number = 0,y :number = 0):Point{\r\n        let point = pool.pop() || new Point();\r\n        point.setMatrix(x,y);\r\n        return point;\r\n    }\r\n\r\n}","import Matrix from \"./Matrix\"\r\nimport { DOMStyleBase } from \"../DOM/DOMBase\"\r\nimport Point from \"./Point\";\r\nconst anglePI = Math.PI / 180;\r\nfunction sin(r: number) {\r\n    let angle = r == 0 ? 0 : r * anglePI\r\n    return Math.sin(angle);\r\n}\r\n\r\nfunction cos(r: number) {\r\n    let angle = r == 0 ? 0 : r * anglePI\r\n    return Math.cos(angle);\r\n}\r\n\r\nfunction tan(r: number) {\r\n    let angle = r == 0 ? 0 : r * anglePI\r\n    return Math.tan(angle);\r\n}\r\n/**\r\n * 装换矩阵\r\n * a 水平缩放绘图\r\n * b 水平倾斜绘图\r\n * c 垂直倾斜绘图\r\n * d 垂直缩放绘图\r\n * e 水平移动绘图\r\n * f 垂直移动绘图\r\n */\r\nlet pool: Array<TransformMatrix> = []\r\nexport default class TransformMatrix extends Matrix {\r\n    public scaleX: number\r\n    public scaleY: number\r\n    public skewX: number\r\n    public skewY: number\r\n    public offsetX: number\r\n    public offsetY: number\r\n    private constructor(scaleX = 1, skewX = 0, skewY = 0, scaleY = 1, offsetX = 0, offsetY = 0) {\r\n        super(scaleX, skewX, skewY, scaleY, offsetX, offsetY);\r\n    }\r\n    public setTransformMatrix(scaleX: number, skewX: number, skewY: number, scaleY: number, offsetX: number, offsetY: number): void {\r\n        this.setMatrix(scaleX, skewX, skewY, scaleY, offsetX, offsetY);\r\n    }\r\n\r\n    public setByStyle(style: DOMStyleBase): void {\r\n        let { rotate, scaleX, scaleY, anchorX, anchorY, x, y, width, height } = style;\r\n        let rotateC = cos(rotate);\r\n        let rotateS = sin(rotate);\r\n        let tx = x * scaleX;\r\n        let ty = y * scaleY;\r\n        let a = rotateC * scaleX;\r\n        let b = rotateS * scaleX;\r\n        let c = -rotateS * scaleY;\r\n        let d = rotateC * scaleY;\r\n        //锚点实现，设置锚点不影响x,y位置，只是固定相对于显示对象（0，0）点，用于旋转\r\n        if (anchorX != 0 || anchorY != 0) {\r\n            let ancX = anchorX;\r\n            let ancY = anchorY;\r\n            let sx = ancX * a + c * ancY + tx//不设锚点会移动到的位置\r\n            let sy = ancX * b + d * ancY + ty\r\n            tx = tx + tx - (sx - ancX * scaleX)\r\n            ty = ty + ty - (sy - ancY * scaleY)\r\n        }\r\n        this.setMatrix(a, b, c, d, tx, ty);\r\n\r\n\r\n\r\n\r\n        //---------------------------------利用矩阵叠加实现-----------------------------------------\r\n        // let matrix = this.translateMatrix(x - anchorX,y - anchorY);\r\n        // if(rotate != 0) matrix.MatrixMulti(this.rotateMatrix(rotate));\r\n        // if(scaleX != 1 || scaleY != 1) matrix.MatrixMulti(this.scaleMatrix(scaleX,scaleY));\r\n        // this.setMatrix(...matrix.value());\r\n    }\r\n\r\n    /**\r\n     * 矩阵乘法，物理意义，实现物体的矩阵的叠加变换\r\n     * 直接改变当前矩阵\r\n     * @param target 叠加的矩阵\r\n     */\r\n    public MatrixMulti(target: Matrix): this {\r\n        let [a2, b2, c2, d2, e2, f2] = [\r\n            this.a * target.a + this.c * target.b,\r\n            this.b * target.a + this.d * target.b,\r\n            this.a * target.c + this.c * target.d,\r\n            this.b * target.c + this.d * target.d,\r\n            this.a * target.e + this.c * target.f + this.e,\r\n            this.b * target.e + this.d * target.f + this.f\r\n        ]\r\n        this.setMatrix(a2, b2, c2, d2, e2, f2)\r\n        return this;\r\n    }\r\n\r\n    //转换坐标系\r\n    public changeCoordinate(point: Point, scaleX: number = 1, scaleY: number = 1): void {\r\n        this.data[4] += point.x * scaleX;\r\n        this.data[5] += point.y * scaleY;\r\n    }\r\n\r\n    public value(): [number, number, number, number, number, number] {\r\n        return this.data;\r\n    }\r\n\r\n    public rotateMatrix(angle: number): TransformMatrix {\r\n        angle = +angle;\r\n        let [s, c] = angle !== 0 ? [cos(angle), sin(angle)] : [0, 1];\r\n        let matrix = TransformMatrix.createTransFormMatrix(c, s, -s, c, 0, 0);\r\n        return matrix;\r\n    }\r\n\r\n    public scaleMatrix(sx: number, sy: number): TransformMatrix {\r\n        let matrix = TransformMatrix.createTransFormMatrix(sx, 0, 0, sy, 0, 0);\r\n        return matrix;\r\n    }\r\n\r\n\r\n\r\n    public translateMatrix(dx: number, dy: number): TransformMatrix {\r\n        let matrix = TransformMatrix.createTransFormMatrix(1, 0, 0, 1, dx, dy);\r\n        return matrix;\r\n    }\r\n\r\n\r\n    /**矩阵求逆 */\r\n    public invertMartix(): void {\r\n        let a = this.a;\r\n        let b = this.b;\r\n        let c = this.c;\r\n        let d = this.d;\r\n        let tx = this.e;\r\n        let ty = this.f;\r\n        if (b == 0 && c == 0) {\r\n            this.b = this.c = 0;\r\n            if (a == 0 || d == 0) {\r\n                this.a = this.d = this.e = this.f = 0;\r\n            }\r\n            else {\r\n                a = this.a = 1 / a;\r\n                d = this.d = 1 / d;\r\n                this.e = -a * tx;\r\n                this.f = -d * ty;\r\n            }\r\n\r\n            return;\r\n        }\r\n        let determinant = a * d - b * c;\r\n        if (determinant == 0) {\r\n            this.setMatrix(1, 0, 0, 1, 0, 0);\r\n            return;\r\n        }\r\n        determinant = 1 / determinant;\r\n        let k = this.a = d * determinant;\r\n        b = this.b = -b * determinant;\r\n        c = this.c = -c * determinant;\r\n        d = this.d = a * determinant;\r\n        this.e = -(k * tx + c * ty);\r\n        this.f = -(b * tx + d * ty);\r\n    }\r\n\r\n    /**把传入的点传化成当前矩阵变化后的点，直接改变目标点 */\r\n    public transFormPoint(p: Point): Point {\r\n        let [a, b, c, d, e, f] = this.data;\r\n        let { x, y } = p;\r\n        p.x = a * x + c * y + e;\r\n        p.y = b * x + d * y + f;\r\n        return p;\r\n    }\r\n\r\n    public copy(m: TransformMatrix): this {\r\n        this.setMatrix(...m.value());\r\n        return this;\r\n    }\r\n    public clone(): TransformMatrix {\r\n        return TransformMatrix.createTransFormMatrix(...this.value())\r\n    }\r\n\r\n    public release(): void {\r\n        this.setMatrix();\r\n        pool.push(this);\r\n    }\r\n    public static createTransFormMatrix(scaleX = 1, skewX = 0, skewY = 0, scaleY = 1, offsetX = 0, offsetY = 0): TransformMatrix {\r\n        let Matrix: TransformMatrix = pool.pop() || new TransformMatrix();\r\n        Matrix.setTransformMatrix(scaleX, skewX, skewY, scaleY, offsetX, offsetY);\r\n        return Matrix;\r\n    }\r\n\r\n}","import { HashMap } from \"./mapUtil/HashMap\"\r\nimport { ObjPool } from \"./object/ObjPool\"\r\nimport { TextParser } from \"./parser/TextParser\"\r\nimport CImage from \"./canvasDOM/DOM/CImage\"\r\nimport Box from \"./canvasDOM/math/Box\"\r\nimport TransformMatrix from \"./canvasDOM/math/TransformMatrix\";\r\nimport CDocument from \"./canvasDOM/DOM/CDocument\";\r\nimport CDOMContainer from \"./canvasDOM/DOM/CDOMContainer\";\r\nimport CText from \"./canvasDOM/DOM/CText\";\r\nimport { throttle } from \"./canvasDOM/global/Global\";\r\nimport { PlugC } from \"./canvasDOM/event/Event\";\r\nimport { TapEvent } from \"./canvasDOM/event/TouchEvent\";\r\nimport { GlobalMgr } from \"./mgr/GlobalMgr\";\r\nimport { FileLoader } from \"./sourceModel/loader/FileLoader\";\r\nimport CArray from \"./DataStruct/CArray\";\r\n\r\nclass Main {\r\n    private stage: CDocument\r\n    public globalMgr:GlobalMgr\r\n    constructor() {\r\n        this.stage = new CDocument();\r\n        this.globalMgr = new GlobalMgr();\r\n        this.start();\r\n        this.test()\r\n    }\r\n\r\n    private start():void{\r\n        let requestAnimationFrame = window.requestAnimationFrame;\r\n        let loop = ()=>{\r\n            // this.stage.sysRender();\r\n            this.stage.renderElement();\r\n            requestAnimationFrame(loop);\r\n        }\r\n        loop();\r\n    }\r\n\r\n    private test(): void {\r\n        for(let i = 0 ;i < 300;i++){\r\n            let k = new CImage();\r\n            k.src = \"./test1.jpeg\"\r\n            k.style.x = i * 10;\r\n            k.style.y = i *10;\r\n            this.stage.appendChild(k)\r\n        }\r\n        let g = new CDOMContainer();\r\n        g.style.x = 50\r\n        g.style.y = 50\r\n        g.style.width = g.style.height = 600\r\n        // g.addEventListener(\"click\",(e)=>{e.stopPropagation()},this)\r\n        this.stage.appendChild(g);\r\n\r\n        // let i1 = new CImage();\r\n        // i1.src = \"./test1.jpeg\"\r\n        // i1.style.x = 300;\r\n        // i1.style.y = 300;\r\n        // this.stage.appendChild(i1);\r\n\r\n        let i = new CImage();\r\n        i.src = \"./test1.jpeg\"\r\n        i.style.x = 300;\r\n        i.style.y = 300;\r\n        // i.style.scaleX = .5\r\n        i.style.rotate = 45;\r\n        i.style.anchorX = 112;\r\n        i.style.anchorY = 84\r\n        i.style.clip = Box.createBox(10,10,100,100)\r\n        g.appendChild(i);\r\n        setInterval(()=>{\r\n            i.style.rotate ++\r\n        },50)\r\n        i.addEventListener(\"tapBegin\",(e)=>{console.log(e);e.stopPropagation()},this,true)\r\n        i.addEventListener(\"tap\",(e)=>{console.log(\"tap\")},this)\r\n        i.addEventListener(\"tapMove\",(e)=>{console.log(\"tapMove\")},this)\r\n        this.loadTest()\r\n  \r\n\r\n    }\r\n\r\n    private async loadTest():Promise<any>{\r\n        let loader = new FileLoader();\r\n        let data = await loader.loadAsync(\"./package.json\");\r\n        console.log(data)\r\n    }\r\n}\r\n\r\nnew Main();","import { SourceMgr } from \"../sourceModel/SourceMgr\";\r\n\r\nexport let resource:SourceMgr\r\n//全局管理器\r\nexport class GlobalMgr{\r\n    constructor(){\r\n        this.init();\r\n    }\r\n    public init():void{\r\n        resource = new SourceMgr();\r\n    }\r\n}","\r\n/**资源管理 */\r\nexport class SourceMgr{\r\n    private imgMap:{[url:string]:HTMLImageElement} = {};\r\n    private JSONMap:{[url:string]:JSON} = {};\r\n    private TEXTMap:{[url:string]:string} = {};\r\n    private getMap(type:sourceType):{[url:string]:any}{\r\n        let map = {} ;\r\n        switch(type){\r\n            case sourceType.image:\r\n                map = this.imgMap;\r\n                break;\r\n            case sourceType.json:\r\n                map = this.JSONMap;\r\n                break;\r\n            case sourceType.text:\r\n                map = this.TEXTMap;\r\n                break;\r\n        }\r\n        return map;\r\n    }\r\n    //判断文件类型\r\n    private checkFileType(url:string):sourceType{\r\n        let index = url.lastIndexOf(\".\")\r\n        if(index == -1) return sourceType.none;\r\n        let excName = url.substr(url.lastIndexOf(\".\")+ 1);\r\n        if(excName == \"json\") return sourceType.json;\r\n        else if(excName == \"txt\") return sourceType.text;\r\n        else if(excName == \"png\" || excName == \"jpg\" || excName == \"jepg\") return sourceType.image;\r\n        return sourceType.none;\r\n    }\r\n\r\n    public hasRES(url:string):boolean{\r\n        return !!this.getRES(url);\r\n    }\r\n\r\n    public getRES(url:string):HTMLImageElement|JSON|string{\r\n        let map = this.getMap(this.checkFileType(url));\r\n        return map[url];\r\n    }\r\n\r\n    //添加资源\r\n    public add(type:sourceType,data:HTMLImageElement|JSON|string,url:string):void{\r\n        let map = this.getMap(type)\r\n        map[url] = data;\r\n    }\r\n\r\n    public remove(type:sourceType,url:string):void{\r\n        let map = this.getMap(type)\r\n        delete map[url];\r\n    }\r\n}\r\n\r\nexport enum sourceType {\r\n    none,\r\n    image,\r\n    json,\r\n    text,\r\n}","import EventDispatch from \"../../canvasDOM/event/EventDispatch\";\r\nimport { SysTem } from \"../../canvasDOM/global/PlugC\";\r\n\r\n/**文件加载 */\r\nexport class FileLoader extends EventDispatch {\r\n    /**设置该属性可以获取不同的文件格式 */\r\n    public responseType: FileLoaderType;\r\n    public response: ArrayBuffer | Blob | Document | string;//数据\r\n    public status: number;\r\n    public readyState: number;\r\n\r\n    /**\r\n     * 同步加载方法\r\n     * @param url 加载地址\r\n     */\r\n    public load(url: string): void {\r\n        let xhr = new XMLHttpRequest();\r\n        //不设置文件样式默认以二进制加载文件\r\n        xhr.responseType = this.responseType || FileLoaderType.ARRAYBUFFER;\r\n        xhr.addEventListener(\"readystatechange\", this.onReadystatechange);\r\n        xhr.addEventListener(\"error\", this.onError);\r\n        xhr.open(\"get\", url);\r\n        xhr.send();\r\n    }\r\n\r\n    /**\r\n     * 异步加载方法\r\n     * @param url 加载地址\r\n     */\r\n    public loadAsync(url: string): Promise<any> {\r\n        return new Promise((resolve, reject) => {\r\n            this.load(url);\r\n            this.once(SysTem.LOAD_COMPLETE, () => {\r\n                this.removeAllEvent();\r\n                resolve(this.response);\r\n            }, this);\r\n            this.once(SysTem.LOAD_ERROR, (e) => {\r\n                this.removeAllEvent()\r\n                reject(e.data);\r\n            }, this)\r\n        })\r\n    }\r\n\r\n    private onReadystatechange: (e: Event) => any = function (e: Event) {\r\n        let xhr = e.currentTarget as XMLHttpRequest;\r\n        let loader: FileLoader = this;\r\n        let status = loader.status = xhr.status;\r\n        let readyState = loader.readyState = xhr.readyState;\r\n        if (status == 200 && readyState == 4) {\r\n            loader.dispatch(SysTem.LOAD_COMPLETE, this.response = xhr.response);\r\n            xhr.removeEventListener(\"readystatechange\", this.onReadystatechange);\r\n            xhr.removeEventListener(\"error\", this.onError);\r\n        }\r\n        loader.dispatch(SysTem.READY_STATE_CHANGE, readyState)\r\n    }.bind(this);\r\n\r\n    private onError: (e: Event) => any = function (e: Event) {\r\n        let xhr = e.currentTarget as XMLHttpRequest;\r\n        let loader: FileLoader = this;\r\n        xhr.removeEventListener(\"readystatechange\", this.onReadystatechange);\r\n        xhr.removeEventListener(\"error\", this.onError);\r\n        loader.dispatch(SysTem.LOAD_ERROR, xhr.responseURL);\r\n    }.bind(this);\r\n\r\n\r\n}\r\n\r\n/**加载文件类型 */\r\nexport enum FileLoaderType {\r\n    ARRAYBUFFER = \"arraybuffer\",\r\n    TEXT = \"text\",\r\n    BLOB = \"blob\",\r\n    DOCUMENT = \"document\",\r\n    JSON = \"json\",\r\n}","import EventDispatch from \"../../canvasDOM/event/EventDispatch\";\r\nimport { resource } from \"../../mgr/GlobalMgr\"\r\nimport { sourceType } from \"../SourceMgr\";\r\nlet pool: Array<ImgLoader> = [];\r\nexport class ImgLoader extends EventDispatch {\r\n    static awaitAndPrevent: { [url: string]: ImgLoader[] } = {};//正在加载的资源，避免重复加载\r\n    static LOAD_COMPLETE: string = \"LOAD_COMPLETE\";\r\n    static LOAD_ERROR: string = \"LOAD_ERROR\"\r\n    public data: HTMLImageElement = null;//加载完成会将结果存放在此\r\n    public loadURL: string = null;\r\n    private loadingElement: HTMLImageElement = null\r\n    public loadAsync(url: string): Promise<HTMLImageElement> {\r\n        return new Promise((resolve, reject) => {\r\n            this.once(ImgLoader.LOAD_COMPLETE, (e) => {\r\n                this.removeAllEvent();\r\n                resolve(e.data);\r\n            }, this);\r\n            this.once(ImgLoader.LOAD_ERROR, (e) => {\r\n                this.removeAllEvent();\r\n                reject(e.data);\r\n            }, this)\r\n            this.load(url);\r\n        })\r\n    }\r\n\r\n\r\n    public load(url: string): void {\r\n        let data: HTMLImageElement\r\n        if (data = resource.getRES(url) as HTMLImageElement) {//已经加载\r\n            this.dispatch(ImgLoader.LOAD_COMPLETE, data);\r\n            return;\r\n        } else if (ImgLoader.awaitAndPrevent[url]) {//正在加载\r\n            ImgLoader.awaitAndPrevent[url].push(this);\r\n            return;\r\n        }\r\n        ImgLoader.awaitAndPrevent[url] = [];\r\n        let img = this.loadingElement = new Image();\r\n        this.loadURL = img.src = url;\r\n        img.addEventListener(\"load\", this.loadComplete);\r\n        img.addEventListener(\"error\", this.loadError);\r\n        img = null;\r\n    }\r\n\r\n    private loadComplete: (e: Event) => void = function (e: Event) {\r\n        let data = this.data = this.loadingElement;\r\n        let url:string = this.loadURL;\r\n        this.loadingElement.removeEventListener(\"load\", this.loadComplete);\r\n        this.loadingElement.removeEventListener(\"error\", this.loadError);\r\n        resource.add(sourceType.image, this.data, this.loadURL);//资源添加到资源管理器\r\n        this.dispatch(ImgLoader.LOAD_COMPLETE, this.data);//通知外部资源加载完成\r\n        let loaders = ImgLoader.awaitAndPrevent[url];\r\n        if (loaders) {\r\n            let loader;\r\n            while (loader = loaders.pop()) {\r\n                loader.data = data\r\n                loader.dispatch(ImgLoader.LOAD_COMPLETE, data);\r\n            }\r\n        }\r\n        this.loadingElement = null;\r\n    }.bind(this)\r\n\r\n    private loadError: (e: Event) => void = function (e: Event) {\r\n        this.loadingElement.removeEventListener(\"load\", this.loadComplete);\r\n        this.loadingElement.removeEventListener(\"error\", this.loadError);\r\n        this.dispatch(ImgLoader.LOAD_ERROR, \"fail load img \" + this.loadURL);\r\n        this.loadingElement = null;\r\n    }.bind(this);\r\n\r\n    public clearLoader(): void {\r\n        this.data && (this.data = null);\r\n        this.loadURL && (this.loadURL = null);\r\n        if (this.loadingElement) {\r\n            this.loadingElement.removeEventListener(\"load\", this.loadComplete);\r\n            this.loadingElement.removeEventListener(\"error\", this.loadError);\r\n            this.loadingElement = null;\r\n        }\r\n    }\r\n\r\n    public release(): void {\r\n        if(pool.length > 50) return;//最大缓存51个图片加载器\r\n        this.clearLoader();\r\n        pool.push(this);\r\n    }\r\n\r\n    public static create(): ImgLoader {\r\n        let loader = pool.pop() || new ImgLoader();\r\n        return loader;\r\n    }\r\n}"],"sourceRoot":""}