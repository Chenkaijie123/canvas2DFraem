{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/canvasDOM/DOM/CDOMContainer.ts","webpack:///./src/canvasDOM/DOM/CDocument.ts","webpack:///./src/canvasDOM/DOM/CImage.ts","webpack:///./src/canvasDOM/DOM/CText.ts","webpack:///./src/canvasDOM/DOM/DOMBase.ts","webpack:///./src/canvasDOM/math/Matrix.ts","webpack:///./src/canvasDOM/math/TransformMatrix.ts","webpack:///./src/index.ts"],"names":[],"mappings":"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","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/index.ts\");\n","import {DOMBase,DOMContainer} from \"./DOMBase\"\r\n/**容器类 */\r\nexport default class CDOMContainer extends DOMBase implements DOMContainer{\r\n    public parent:DOMContainer\r\n    public children:DOMBase[] = [];\r\n    public appendChild(child:DOMBase):this{\r\n        if(child.parent == this) return this;\r\n        child.removeSelf();\r\n        this.children.push(child);\r\n        child.parent = this;\r\n        return this;\r\n    }\r\n    public removeChild(child:DOMBase):this{\r\n        if(child.parent == void 0) return this;\r\n        let index = this.children.indexOf(child)\r\n        this.children.splice(index,1);\r\n        child.parent = null;\r\n        return this;\r\n    }\r\n}","import CDOMContainer from \"./CDOMContainer\"\r\nimport { DOMBase } from \"./DOMBase\"\r\nimport Point from \"../math/Point\";\r\n/**虚拟文本 */\r\nexport default class CDocument extends CDOMContainer {\r\n    private reRenderDeep: number;//需要重新渲染的深度\r\n    private canvas:HTMLCanvasElement \r\n    private context:CanvasRenderingContext2D;\r\n    constructor() {\r\n        super();\r\n        this.parent = this;\r\n    }\r\n\r\n    private initCanvas():void{\r\n        let canvas = document.createElement(\"canvas\");\r\n        this.canvas = canvas\r\n        canvas.width = 1000;\r\n        canvas.height = 600;\r\n        canvas.id = \"canvas\"\r\n        document.body.appendChild(canvas);\r\n        this.context = canvas.getContext(\"2d\");\r\n    }\r\n\r\n    public init(): void {\r\n        super.init();\r\n        this.initCanvas();\r\n        this.deep = 1;\r\n    }\r\n\r\n    private iterator<T>(loot:Array<DOMBase>,fn:(e:DOMBase)=>T):T[]{\r\n        let res = [];\r\n        for(let i:number = 0, e :any ;e = loot[i];i++){\r\n            res.push(fn(e))\r\n            if(e[\"children\"]){\r\n                res.push(...this.iterator(e[\"children\"],fn));\r\n            }\r\n        }\r\n        return res;\r\n    }\r\n\r\n    \r\n\r\n    public getElementById(id: string): DOMBase {\r\n        let loop = this.children;\r\n        return (this.iterator<DOMBase>(loop,(e)=>{return e})[0])\r\n    }\r\n\r\n    public getElementsByClassName(id: string): DOMBase[] {\r\n        return\r\n    }\r\n\r\n    //判断重新渲染深度\r\n    public changeReRenderDeep(deep: number): void {\r\n        this.reRenderDeep = this.reRenderDeep > deep ? deep : this.reRenderDeep;\r\n    }\r\n\r\n    //内部计算并且渲染\r\n    public sysRender():void{\r\n        //todo\r\n        this.context.setTransform(1,0,0,1,0,0)\r\n        this.context.clearRect(0,0,this.canvas.width,this.canvas.height)\r\n        let loot = this.children;\r\n        let anc = 0\r\n        let fn = (e:DOMBase)=>{\r\n            //重新计算需要重绘的数据\r\n            if(e.reRender) {\r\n                let style = e.style\r\n                // let p = Point.createPiont(style.x,style.y);\r\n                // p.add(e.parent.position);\r\n                // e.position.copy(p);\r\n                // p.release();\r\n                e.matrix.setByStyle(style);//转换矩阵\r\n                // e.matrix.changeCoordinate(e.position,style.scaleX,style.scaleY);\r\n                e.reRender = false;\r\n            }\r\n            if(e.parent instanceof CDocument){\r\n                this.context.setTransform(...e.matrix.value());\r\n            }else{\r\n                this.context.transform(...e.matrix.value());\r\n            }\r\n            e.render(this.context);\r\n        }\r\n        let t = Date.now()\r\n        this.iterator(loot,fn);\r\n        console.log(Date.now() - t)\r\n    }\r\n}","import {DOMBase,DOMStyleBase} from \"./DOMBase\"\r\nexport default class CImage extends DOMBase{\r\n    private _src:string\r\n    public treasure:HTMLImageElement;\r\n    public get src():string{\r\n        return this._src;\r\n    }\r\n\r\n    public set src(url:string){\r\n        if(this._src != url){\r\n            this._src = url;\r\n            this.treasure.src = url;\r\n            let _t = this;\r\n            function load(){\r\n                _t.style.width = this.width;\r\n                _t.style.height = this.height;\r\n                _t.treasure.removeEventListener(\"load\",load);\r\n                _t.treasure.removeEventListener(\"error\",err);\r\n                !_t.reRender && (_t.reRender = true);\r\n            }\r\n            function err(e:Event){\r\n                console.error(e);\r\n                _t.treasure.removeEventListener(\"load\",load);\r\n                _t.treasure.removeEventListener(\"error\",err);\r\n            }\r\n            this.treasure.addEventListener(\"load\",load);\r\n            this.treasure.addEventListener(\"error\",err);\r\n        }\r\n    }\r\n\r\n    constructor(){\r\n        super();\r\n        this.type = \"CImage\";\r\n        this.treasure = new Image();\r\n    }\r\n    public render(ctx:CanvasRenderingContext2D):void{\r\n        // ctx.setTransform(...this.matrix.value())\r\n        ctx.drawImage(this.treasure,-this.style.anchorX,-this.style.anchorY);\r\n        \r\n    }\r\n\r\n\r\n}\r\n\r\n","import { DOMBase, DOMStyleBase } from \"./DOMBase\";\r\nimport TransformMatrix from \"../math/TransformMatrix\";\r\nimport Point from \"../math/Point\";\r\n\r\nexport default class CText extends DOMBase{\r\n    public _style: TextStyle\r\n    public proxy:TextStyle\r\n    public get style() {\r\n        return this.proxy;\r\n    }\r\n    public set style(v) {\r\n        this._style = v;\r\n    }\r\n    protected init(): void {\r\n        this.style = {\r\n            x: 0,\r\n            y: 0,\r\n            scaleX: 1,\r\n            scaleY: 1,\r\n            visible: true,\r\n            alpha: 1,\r\n            width: 0,\r\n            height: 0,\r\n            anchorX: 0,\r\n            anchorY: 0,\r\n            rotate: 0,\r\n            skewX: 0,\r\n            skewY: 0,\r\n            fontSize:24,\r\n            fontFamily:\"微软雅黑\",\r\n            textColor:0xffffff,\r\n            border:0,\r\n            borderColor:null,\r\n            bold:false,\r\n            text:\"\",\r\n            textAlign:\"left\",\r\n            fontStyle:\"normal\",\r\n        }\r\n        this.reRender = true;\r\n        this.listenerMap = {};\r\n        this.matrix = TransformMatrix.createTransFormMatrix();\r\n        // this.position = Point.createPiont();\r\n    }\r\n    public render(ctx:CanvasRenderingContext2D):void{\r\n        // ctx.setTransform(...this.matrix.value())\r\n        let style = `${this.style.fontStyle} normal ${this.style.bold?\"bold\":\"normal\"} ${this.style.fontSize}px ${this.style.fontFamily}`\r\n        if(ctx.font != style)ctx.font = style;\r\n        let color = `#${this.style.textColor.toString(16)}`;\r\n        if(ctx.fillStyle != color)ctx.fillStyle = color;\r\n        ctx.fillText(this.style.text,this.style.anchorX,this.style.anchorY)\r\n        if(this.style.border > 0){\r\n            color =  `#${this.style.borderColor.toString(16)}`;\r\n            if(ctx.strokeStyle != color) ctx.strokeStyle = color;\r\n            ctx.strokeText(this.style.text,this.style.anchorX,this.style.anchorY)\r\n        }\r\n        // console.log(ctx.measureText(this.style.text))\r\n        \r\n    }\r\n}\r\n\r\ninterface TextStyle extends DOMStyleBase{\r\n    fontSize:number\r\n    fontFamily:string\r\n    textColor:number\r\n    border:number\r\n    borderColor:number\r\n    bold:boolean\r\n    text:string\r\n    textAlign:textAlignType\r\n    fontStyle:fontStyle\r\n}\r\n\r\nexport type textAlignType = \"start\"|\"end\"|\"left\"|\"center\"|\"right\"\r\nexport type fontStyle = \"normal\"|\"italic\"|\"oblique\"","import TransformMatrix from \"../math/TransformMatrix\";\r\nimport Point from \"../math/Point\";\r\n\r\n/**\r\n * 基础DOM\r\n */\r\nlet hashCode:number = 0;\r\nexport abstract class DOMBase {\r\n    public type: string\r\n    public _style: DOMStyleBase\r\n    public className: string\r\n    public id: string\r\n    public parent: DOMContainer\r\n    protected listenerMap: { [key: string]: [Function, any][] }\r\n    public reRender: boolean;//重绘标志\r\n    protected proxy: DOMStyleBase\r\n    protected deep: number\r\n    public matrix: TransformMatrix\r\n    // public position: Point;//全局坐标\r\n    public hashCode:number\r\n    public get style() {\r\n        return this.proxy;\r\n    }\r\n    public set style(v) {\r\n        this._style = v;\r\n    }\r\n    //留下的扩展接口\r\n    protected proxyHandle: Function = <k extends keyof DOMStyleBase>(target: DOMStyleBase, key: k, newData: DOMStyleBase[k], proxy: DOMStyleBase) => { }\r\n    constructor() {\r\n        this.hashCode = hashCode++\r\n        this.init();\r\n        let self = this;\r\n        this.proxy = new Proxy(this._style, {\r\n            set<k extends keyof DOMStyleBase>(target: DOMStyleBase, key: k, newData: DOMStyleBase[k], proxy: DOMStyleBase): any {\r\n                if (target[key] != newData) {\r\n                    target[key] = newData;\r\n                    if (!self.reRender) self.reRender = true;\r\n                    self.proxyHandle(target, key, newData, proxy);\r\n                   \r\n                }\r\n                return true\r\n            }\r\n        })\r\n\r\n    }\r\n\r\n\r\n    public appendTo(parent: DOMContainer): this {\r\n        parent.appendChild(this);\r\n        return this;\r\n    }\r\n    public removeSelf(): this {\r\n        if (this.parent) {\r\n            this.parent.removeChild(this);\r\n            return this;\r\n        }\r\n    }\r\n\r\n    public once(type: string, listener: Function, caller: any): void {\r\n        function fn() {\r\n            listener.call(caller);\r\n            this.removeEventListener(type, fn, caller);\r\n        }\r\n        this.addEventListener(type, fn, caller);\r\n    }\r\n\r\n    public addEventListener(type: string, listener: Function, caller: any): void {\r\n        if (!this.hasEvent(type, listener, caller)) {\r\n            if (!this.listenerMap[type]) this.listenerMap[type] = [];\r\n            this.listenerMap[type].push([listener, caller])\r\n        }\r\n    }\r\n    public removeEventListener(type: string, listener: Function, caller: any): void {\r\n        this.hasEvent(type, listener, caller, true)\r\n    }\r\n\r\n    private hasEvent(type: string, listener: Function, caller: any, remove: boolean = false): boolean {\r\n        let map = this.listenerMap[type];\r\n        let idx: number = 0;\r\n        for (let i of map) {\r\n            if (i[0] == listener && i[1] == caller) {\r\n                if (remove) map.splice(idx, 1)\r\n                return true\r\n            }\r\n            idx++\r\n        }\r\n        return false\r\n    }\r\n\r\n    public emit(type: string): void {\r\n        let map = this.listenerMap[type];\r\n        for (let i of map) {\r\n            i[0].call(i[1]);\r\n        }\r\n    }\r\n\r\n    //判断是否重绘\r\n    public checkReRender(): boolean {\r\n        return this.reRender = true;\r\n    }\r\n\r\n    protected init(): void {\r\n        this.style = {\r\n            x: 0,\r\n            y: 0,\r\n            scaleX: 1,\r\n            scaleY: 1,\r\n            visible: true,\r\n            alpha: 1,\r\n            width: 0,\r\n            height: 0,\r\n            anchorX: 0,\r\n            anchorY: 0,\r\n            rotate: 0,\r\n            skewX: 0,\r\n            skewY: 0,\r\n        }\r\n        this.reRender = true;\r\n        this.listenerMap = {};\r\n        this.matrix = TransformMatrix.createTransFormMatrix();\r\n        // this.position = Point.createPiont();\r\n    }\r\n\r\n    protected reset(): void {\r\n\r\n    }\r\n\r\n    public render(ctx: CanvasRenderingContext2D): void { }\r\n}\r\n\r\n// interface DOMType {\r\n//     CDocument: string\r\n//     DOMBase: string\r\n//     CImage: string\r\n// }\r\n\r\n\r\nexport interface DOMStyleBase {\r\n    x: number\r\n    y: number\r\n    scaleX: number\r\n    scaleY: number\r\n    visible: boolean\r\n    alpha: number\r\n    width: number\r\n    height: number\r\n    anchorX: number\r\n    anchorY: number\r\n    rotate: number\r\n    skewX: number\r\n    skewY: number\r\n}\r\n\r\n// interface DOMStyleBaseKeyOf{\r\n//     \"x\":number\r\n//     \"y\":number\r\n//     \"scaleX\":number\r\n//     \"scaleY\":number\r\n//     \"visible\":boolean\r\n//     \"alpha\":number\r\n//     \"width\":number\r\n//     \"height\":number\r\n// }\r\n\r\n/**可以添加其上的DOM节点 */\r\nexport interface DOMContainer extends DOMBase {\r\n    parent: DOMContainer\r\n    children: DOMBase[]\r\n    appendChild(child: DOMBase): this\r\n    removeChild(child: DOMBase): this\r\n}","/**\r\n * 矩阵数据结构\r\n * 用于模拟多种数据\r\n */\r\nexport default class Matrix{\r\n    protected data:[number,number,number,number,number,number]\r\n    constructor(a:number = 0,b:number = 0,c:number = 0,d:number = 0,e:number = 0,f:number = 0){\r\n        this.data = [a,b,c,d,e,f];\r\n    }\r\n    public get a():number{\r\n        return this.data[0]\r\n    }\r\n    public set a(v:number){\r\n         this.data[0] = v;\r\n    }\r\n\r\n    public get b():number{\r\n        return this.data[1]\r\n    }\r\n    public set b(v:number){\r\n         this.data[1] = v;\r\n    }\r\n    public get c():number{\r\n        return this.data[2]\r\n    }\r\n    public set c(v:number){\r\n         this.data[2] = v;\r\n    }\r\n    public get d():number{\r\n        return this.data[3]\r\n    }\r\n    public set d(v:number){\r\n         this.data[3] = v;\r\n    }\r\n    public get e():number{\r\n        return this.data[4]\r\n    }\r\n    public set e(v:number){\r\n         this.data[4] = v;\r\n    }\r\n    public get f():number{\r\n        return this.data[5]\r\n    }\r\n    public set f(v:number){\r\n         this.data[5] = v;\r\n    }\r\n\r\n    public setMatrix(a:number = 0,b:number = 0,c:number = 0,d:number = 0,e:number = 0,f:number = 0):void{\r\n        this.data = [a,b,c,d,e,f];\r\n    }\r\n\r\n    public getMartrix():[number,number,number,number,number,number]{\r\n        return this.data;\r\n    }\r\n}","import Matrix from \"./Matrix\"\r\nimport { DOMStyleBase } from \"../DOM/DOMBase\"\r\nimport Point from \"./Point\";\r\nconst anglePI = Math.PI / 180;\r\nfunction sin(r: number) {\r\n    let angle = r == 0 ? 0 : r * anglePI\r\n    return Math.sin(angle);\r\n}\r\n\r\nfunction cos(r: number) {\r\n    let angle = r == 0 ? 0 : r * anglePI\r\n    return Math.cos(angle);\r\n}\r\n\r\nfunction tan(r: number) {\r\n    let angle = r == 0 ? 0 : r * anglePI\r\n    return Math.tan(angle);\r\n}\r\n/**\r\n * 装换矩阵\r\n * a 水平缩放绘图\r\n * b 水平倾斜绘图\r\n * c 垂直倾斜绘图\r\n * d 垂直缩放绘图\r\n * e 水平移动绘图\r\n * f 垂直移动绘图\r\n */\r\nlet pool: Array<TransformMatrix> = []\r\nexport default class TransformMatrix extends Matrix {\r\n    public scaleX: number\r\n    public scaleY: number\r\n    public skewX: number\r\n    public skewY: number\r\n    public offsetX: number\r\n    public offsetY: number\r\n    private constructor(scaleX = 1, skewX = 0, skewY = 0, scaleY = 1, offsetX = 0, offsetY = 0) {\r\n        super(scaleX, skewX, skewY, scaleY, offsetX, offsetY);\r\n    }\r\n    public setTransformMatrix(scaleX: number, skewX: number, skewY: number, scaleY: number, offsetX: number, offsetY: number): void {\r\n        this.setMatrix(scaleX, skewX, skewY, scaleY, offsetX, offsetY);\r\n    }\r\n\r\n    public setByStyle(style: DOMStyleBase): void {\r\n        let { rotate, scaleX, scaleY, anchorX, anchorY, x, y} = style;\r\n        let rotateC = cos(rotate);\r\n        let rotateS = sin(rotate);\r\n        let tx = (x + anchorX) * scaleX;\r\n        let ty = (y + anchorY) * scaleY;\r\n        let a = rotateC * scaleX;\r\n        let b = rotateS * scaleX;\r\n        let c = -rotateS * scaleY;\r\n        let d = rotateC * scaleY;\r\n        this.setMatrix(a, b, c, d, tx, ty);\r\n        // this.translate(x,y).rotate(rotate).scale(scaleX,scaleY)\r\n    }\r\n\r\n    //转换坐标系\r\n    public changeCoordinate(point: Point,scaleX:number = 1,scaleY :number = 1): void {\r\n        this.data[4] += point.x * scaleX;\r\n        this.data[5] += point.y * scaleY;\r\n    }\r\n\r\n    public value(): [number, number, number, number, number, number] {\r\n        return this.data;\r\n    }\r\n\r\n    public rotate(angle: number): this {\r\n        // angle = +angle;\r\n        if (angle !== 0) {\r\n            let u = cos(angle);\r\n            let v = sin(angle);\r\n            let ta = this.a;\r\n            let tb = this.b;\r\n            let tc = this.c;\r\n            let td = this.d;\r\n            let ttx = this.e;\r\n            let tty = this.f;\r\n            this.data[0] = ta * u - tb * v;\r\n            this.data[1] = ta * v + tb * u;\r\n            this.data[2] = tc * u - td * v;\r\n            this.data[3] = tc * v + td * u;\r\n            this.data[4] = ttx * u - tty * v;\r\n            this.data[5]= ttx * v + tty * u;\r\n        }\r\n        return this;\r\n    }\r\n\r\n    public scale(sx: number, sy: number): this {\r\n        if (sx !== 1) {\r\n            this.data[0] *= sx;\r\n            this.data[2] *= sx;\r\n            this.data[4] *= sx;\r\n        }\r\n        if (sy !== 1) {\r\n            this.data[1] *= sy;\r\n            this.data[3] *= sy;\r\n            this.data[5] *= sy;\r\n        }\r\n        return this;\r\n    }\r\n\r\n    public translate(dx: number, dy: number): this {\r\n        this.data[4] += dx;\r\n        this.data[5] += dy;\r\n        return this;\r\n    }\r\n\r\n    public static createTransFormMatrix(scaleX = 1, skewX = 0, skewY = 0, scaleY = 1, offsetX = 0, offsetY = 0): TransformMatrix {\r\n        let Matrix: TransformMatrix = pool.pop() || new TransformMatrix();\r\n        Matrix.setTransformMatrix(scaleX, skewX, skewY, scaleY, offsetX, offsetY);\r\n        return Matrix;\r\n    }\r\n\r\n}","import { HashMap } from \"./mapUtil/HashMap\"\r\nimport { ObjPool } from \"./object/ObjPool\"\r\nimport { TextParser } from \"./parser/TextParser\"\r\nimport CImage from \"./canvasDOM/DOM/CImage\"\r\nimport Box from \"./canvasDOM/math/Box\"\r\nimport TransformMatrix from \"./canvasDOM/math/TransformMatrix\";\r\nimport CDocument from \"./canvasDOM/DOM/CDocument\";\r\nimport CDOMContainer from \"./canvasDOM/DOM/CDOMContainer\";\r\nimport CText from \"./canvasDOM/DOM/CText\";\r\nimport { throttle } from \"./canvasDOM/global/Global\";\r\n\r\nclass Main {\r\n    private stage: CDocument\r\n    constructor() {\r\n        this.stage = new CDocument();\r\n        this.start();\r\n        this.test()\r\n    }\r\n\r\n    private start():void{\r\n        let requestAnimationFrame = window.requestAnimationFrame;\r\n        let loop = ()=>{\r\n            this.stage.sysRender();\r\n            requestAnimationFrame(loop);\r\n        }\r\n        loop();\r\n    }\r\n\r\n    private test(): void {\r\n        let g = new CDOMContainer();\r\n        g.style.x = 50\r\n        g.style.y = 50\r\n        this.stage.appendChild(g);\r\n        let i = new CImage();\r\n        i.src = \"./test1.jpeg\"\r\n        i.style.x = 0;\r\n        i.style.y = 0;\r\n        i.style.rotate = 45;\r\n        i.style.anchorX = 112;\r\n        i.style.anchorY = 84\r\n        this.stage.appendChild(i);\r\n        let p = new CImage();\r\n        p.src = \"./test.png\"\r\n        p.style.anchorX = 50;\r\n        p.style.anchorY = 50\r\n        g.appendChild(p);\r\n        let t = new CText()\r\n        t.style.text = \"你好\"\r\n        t.style.fontFamily = \"Arial\"\r\n        t.style.x = 300\r\n        t.style.textColor = 0xFFF9E2\r\n        t.style.border = 2;\r\n        t.style.borderColor = 0x000000\r\n        t.style.rotate = 30\r\n        t.style.fontSize = 30;\r\n        t.style.anchorX = 30\r\n        t.style.anchorY = 15\r\n        setInterval(()=>{\r\n            g.style.rotate++\r\n        },10)\r\n        g.appendChild(t)\r\n        let g1 = new CDOMContainer();\r\n        g.appendChild(g1)\r\n        let i2 = new CImage\r\n        i2.src = \"./test.png\"\r\n        g1.appendChild(i2)\r\n        i2.style.scaleX = .5;\r\n        setInterval(()=>{\r\n            i2.style.x++\r\n        },10)\r\n  \r\n\r\n    }\r\n}\r\n\r\nnew Main();"],"sourceRoot":""}