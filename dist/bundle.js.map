{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/canvasDOM/DOM/CDOMContainer.ts","webpack:///./src/canvasDOM/DOM/CDocument.ts","webpack:///./src/canvasDOM/DOM/CImage.ts","webpack:///./src/canvasDOM/DOM/DOMBase.ts","webpack:///./src/canvasDOM/math/Matrix.ts","webpack:///./src/canvasDOM/math/Point.ts","webpack:///./src/canvasDOM/math/TransformMatrix.ts","webpack:///./src/index.ts"],"names":[],"mappings":";AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,kDAA0C,gCAAgC;AAC1E;AACA;;AAEA;AACA;AACA;AACA,gEAAwD,kBAAkB;AAC1E;AACA,yDAAiD,cAAc;AAC/D;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iDAAyC,iCAAiC;AAC1E,wHAAgH,mBAAmB,EAAE;AACrI;AACA;;AAEA;AACA;AACA;AACA,mCAA2B,0BAA0B,EAAE;AACvD,yCAAiC,eAAe;AAChD;AACA;AACA;;AAEA;AACA,8DAAsD,+DAA+D;;AAErH;AACA;;;AAGA;AACA;;;;;;;;;;;;;;;AClFA,yFAA8C;AAC9C,SAAS;AACT,MAAqB,aAAc,SAAQ,iBAAO;IAAlD;;QAEW,aAAQ,GAAa,EAAE,CAAC;IAenC,CAAC;IAdU,WAAW,CAAC,KAAa;QAC5B,IAAG,KAAK,CAAC,MAAM,IAAI,IAAI;YAAE,OAAO,IAAI,CAAC;QACrC,KAAK,CAAC,UAAU,EAAE,CAAC;QACnB,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;QAC1B,KAAK,CAAC,MAAM,GAAG,IAAI,CAAC;QACpB,OAAO,IAAI,CAAC;IAChB,CAAC;IACM,WAAW,CAAC,KAAa;QAC5B,IAAG,KAAK,CAAC,MAAM,IAAI,KAAK,CAAC;YAAE,OAAO,IAAI,CAAC;QACvC,IAAI,KAAK,GAAG,IAAI,CAAC,QAAQ,CAAC,OAAO,CAAC,KAAK,CAAC;QACxC,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,KAAK,EAAC,CAAC,CAAC,CAAC;QAC9B,KAAK,CAAC,MAAM,GAAG,IAAI,CAAC;QACpB,OAAO,IAAI,CAAC;IAChB,CAAC;CACJ;AAjBD,gCAiBC;;;;;;;;;;;;;;;ACnBD,2GAA2C;AAE3C,0FAAkC;AAClC,UAAU;AACV,MAAqB,SAAU,SAAQ,uBAAa;IAIhD;QACI,KAAK,EAAE,CAAC;QACR,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC;IACvB,CAAC;IAEO,UAAU;QACd,IAAI,MAAM,GAAG,QAAQ,CAAC,aAAa,CAAC,QAAQ,CAAC,CAAC;QAC9C,IAAI,CAAC,MAAM,GAAG,MAAM;QACpB,MAAM,CAAC,KAAK,GAAG,IAAI,CAAC;QACpB,MAAM,CAAC,MAAM,GAAG,GAAG,CAAC;QACpB,MAAM,CAAC,EAAE,GAAG,QAAQ;QACpB,MAAM,CAAC,gBAAgB,CAAC,WAAW,EAAC,CAAC,CAAC,EAAC,EAAE;YACrC,IAAI,CAAC,GAAG,CAAC,CAAC,OAAO;YACjB,IAAI,CAAC,GAAG,CAAC,CAAC,OAAO;YACjB,IAAI,IAAI,GAAG,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,QAAQ,EAAC,CAAC,CAAC,EAAC,EAAE;gBACxC,IAAI,CAAC,GAAG,CAAC,CAAC,QAAQ,CAAC,eAAK,CAAC,WAAW,CAAC,CAAC,EAAC,CAAC,CAAC,CAAC;gBAC1C,IAAI,GAAG,GAAG,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,EAAC,CAAC,CAAC,CAAC,CAAC;gBAC5B,CAAC,CAAC,OAAO,EAAE,CAAC;gBACZ,IAAG,GAAG,EAAC;oBACH,OAAO,IAAI,CAAC;iBACf;gBACD,oBAAoB;YACxB,CAAC,CAAC;YACF,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC;QAErB,CAAC,CAAC;QACF,QAAQ,CAAC,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC,CAAC;QAClC,IAAI,CAAC,OAAO,GAAG,MAAM,CAAC,UAAU,CAAC,IAAI,CAAC,CAAC;IAC3C,CAAC;IAEM,IAAI;QACP,KAAK,CAAC,IAAI,EAAE,CAAC;QACb,IAAI,CAAC,UAAU,EAAE,CAAC;QAClB,IAAI,CAAC,IAAI,GAAG,CAAC,CAAC;IAClB,CAAC;IAEO,QAAQ,CAAI,IAAmB,EAAC,EAAiB;QACrD,IAAI,GAAG,GAAG,EAAE,CAAC;QACb,KAAI,IAAI,CAAC,GAAU,CAAC,EAAE,CAAM,EAAE,CAAC,GAAG,IAAI,CAAC,CAAC,CAAC,EAAC,CAAC,EAAE,EAAC;YAC1C,GAAG,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;YACf,IAAG,CAAC,CAAC,UAAU,CAAC,EAAC;gBACb,GAAG,CAAC,IAAI,CAAC,GAAG,IAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,UAAU,CAAC,EAAC,EAAE,CAAC,CAAC,CAAC;aAChD;SACJ;QACD,OAAO,GAAG,CAAC;IACf,CAAC;IAIM,cAAc,CAAC,EAAU;QAC5B,IAAI,IAAI,GAAG,IAAI,CAAC,QAAQ,CAAC;QACzB,OAAO,CAAC,IAAI,CAAC,QAAQ,CAAU,IAAI,EAAC,CAAC,CAAC,EAAC,EAAE,GAAC,OAAO,CAAC,GAAC,CAAC,CAAC,CAAC,CAAC,CAAC;IAC5D,CAAC;IAEM,sBAAsB,CAAC,EAAU;QACpC,OAAM;IACV,CAAC;IAED,UAAU;IACH,kBAAkB,CAAC,IAAY;QAClC,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,IAAI,CAAC,YAAY,CAAC;IAC5E,CAAC;IAED,UAAU;IACH,SAAS;QACZ,MAAM;QACN,IAAI,CAAC,OAAO,CAAC,YAAY,CAAC,CAAC,EAAC,CAAC,EAAC,CAAC,EAAC,CAAC,EAAC,CAAC,EAAC,CAAC,CAAC;QACtC,IAAI,CAAC,OAAO,CAAC,SAAS,CAAC,CAAC,EAAC,CAAC,EAAC,IAAI,CAAC,MAAM,CAAC,KAAK,EAAC,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC;QAChE,IAAI,IAAI,GAAG,IAAI,CAAC,QAAQ,CAAC;QACzB,IAAI,GAAG,GAAG,CAAC;QACX,IAAI,EAAE,GAAG,CAAC,CAAS,EAAC,EAAE;YAClB,aAAa;YACb,IAAG,CAAC,CAAC,QAAQ,EAAE;gBACX,IAAI,KAAK,GAAG,CAAC,CAAC,KAAK;gBACnB,CAAC,CAAC,MAAM,CAAC,UAAU,CAAC,KAAK,CAAC,CAAC,OAAM;gBACjC,CAAC,CAAC,QAAQ,GAAG,KAAK,CAAC;aACtB;YACD,0BAA0B;YAC1B,sCAAsC;YACtC,yBAAyB;YACzB,IAAG,CAAC,CAAC,MAAM,YAAY,SAAS,EAAC;gBAC7B,IAAI,CAAC,OAAO,CAAC,YAAY,CAAC,GAAG,CAAC,CAAC,MAAM,CAAC,KAAK,EAAE,CAAC,CAAC;aAClD;iBAAI;gBACD,IAAI,CAAC,OAAO,CAAC,SAAS,CAAC,GAAG,CAAC,CAAC,MAAM,CAAC,KAAK,EAAE,CAAC,CAAC;aAC/C;YACD,CAAC,CAAC,MAAM,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;QAC3B,CAAC;QACD,qBAAqB;QACrB,IAAI,CAAC,QAAQ,CAAC,IAAI,EAAC,EAAE,CAAC,CAAC;QACvB,8BAA8B;IAClC,CAAC;CACJ;AA/FD,4BA+FC;;;;;;;;;;;;;;;ACnGD,yFAA8C;AAC9C,MAAqB,MAAO,SAAQ,iBAAO;IAGvC,IAAW,GAAG;QACV,OAAO,IAAI,CAAC,IAAI,CAAC;IACrB,CAAC;IAED,IAAW,GAAG,CAAC,GAAU;QACrB,IAAG,IAAI,CAAC,IAAI,IAAI,GAAG,EAAC;YAChB,IAAI,CAAC,IAAI,GAAG,GAAG,CAAC;YAChB,IAAI,CAAC,QAAQ,CAAC,GAAG,GAAG,GAAG,CAAC;YACxB,IAAI,EAAE,GAAG,IAAI,CAAC;YACd,SAAS,IAAI;gBACT,EAAE,CAAC,KAAK,CAAC,KAAK,GAAG,IAAI,CAAC,KAAK,CAAC;gBAC5B,EAAE,CAAC,KAAK,CAAC,MAAM,GAAG,IAAI,CAAC,MAAM,CAAC;gBAC9B,EAAE,CAAC,QAAQ,CAAC,mBAAmB,CAAC,MAAM,EAAC,IAAI,CAAC,CAAC;gBAC7C,EAAE,CAAC,QAAQ,CAAC,mBAAmB,CAAC,OAAO,EAAC,GAAG,CAAC,CAAC;gBAC7C,CAAC,EAAE,CAAC,QAAQ,IAAI,CAAC,EAAE,CAAC,QAAQ,GAAG,IAAI,CAAC,CAAC;YACzC,CAAC;YACD,SAAS,GAAG,CAAC,CAAO;gBAChB,OAAO,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;gBACjB,EAAE,CAAC,QAAQ,CAAC,mBAAmB,CAAC,MAAM,EAAC,IAAI,CAAC,CAAC;gBAC7C,EAAE,CAAC,QAAQ,CAAC,mBAAmB,CAAC,OAAO,EAAC,GAAG,CAAC,CAAC;YACjD,CAAC;YACD,IAAI,CAAC,QAAQ,CAAC,gBAAgB,CAAC,MAAM,EAAC,IAAI,CAAC,CAAC;YAC5C,IAAI,CAAC,QAAQ,CAAC,gBAAgB,CAAC,OAAO,EAAC,GAAG,CAAC,CAAC;SAC/C;IACL,CAAC;IAED;QACI,KAAK,EAAE,CAAC;QACR,IAAI,CAAC,IAAI,GAAG,QAAQ,CAAC;QACrB,IAAI,CAAC,QAAQ,GAAG,IAAI,KAAK,EAAE,CAAC;IAChC,CAAC;IACM,MAAM,CAAC,GAA4B;QACtC,IAAI,EAAC,KAAK,EAAC,MAAM,EAAC,CAAC,EAAC,CAAC,EAAC,OAAO,EAAC,OAAO,EAAC,GAAG,IAAI,CAAC,KAAK;QACnD,GAAG,CAAC,SAAS,CAAC,IAAI,CAAC,QAAQ,EAAC,OAAO,EAAC,OAAO,CAAC,CAAC;IAEjD,CAAC;CAGJ;AAzCD,yBAyCC;;;;;;;;;;;;;;;AC1CD,wHAAsD;AAItD;;GAEG;AACH,IAAI,QAAQ,GAAU,CAAC,CAAC;AACxB,MAAsB,OAAO;IAqBzB;QAFA,SAAS;QACC,gBAAW,GAAa,CAA+B,MAAoB,EAAE,GAAM,EAAE,OAAwB,EAAE,KAAmB,EAAE,EAAE,GAAG,CAAC;QAEhJ,IAAI,CAAC,QAAQ,GAAG,QAAQ,EAAE;QAC1B,IAAI,CAAC,IAAI,EAAE,CAAC;QACZ,IAAI,IAAI,GAAG,IAAI,CAAC;QAChB,IAAI,CAAC,KAAK,GAAG,IAAI,KAAK,CAAC,IAAI,CAAC,MAAM,EAAE;YAChC,GAAG,CAA+B,MAAoB,EAAE,GAAM,EAAE,OAAwB,EAAE,KAAmB;gBACzG,IAAI,MAAM,CAAC,GAAG,CAAC,IAAI,OAAO,EAAE;oBACxB,MAAM,CAAC,GAAG,CAAC,GAAG,OAAO,CAAC;oBACtB,IAAI,CAAC,IAAI,CAAC,QAAQ;wBAAE,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;oBACzC,IAAI,CAAC,WAAW,CAAC,MAAM,EAAE,GAAG,EAAE,OAAO,EAAE,KAAK,CAAC,CAAC;iBAEjD;gBACD,OAAO,IAAI;YACf,CAAC;SACJ,CAAC;IAEN,CAAC;IAxBD,IAAW,KAAK;QACZ,OAAO,IAAI,CAAC,KAAK,CAAC;IACtB,CAAC;IACD,IAAW,KAAK,CAAC,CAAC;QACd,IAAI,CAAC,MAAM,GAAG,CAAC,CAAC;IACpB,CAAC;IAsBM,QAAQ,CAAC,MAAoB;QAChC,MAAM,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC;QACzB,OAAO,IAAI,CAAC;IAChB,CAAC;IACM,UAAU;QACb,IAAI,IAAI,CAAC,MAAM,EAAE;YACb,IAAI,CAAC,MAAM,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC;YAC9B,OAAO,IAAI,CAAC;SACf;IACL,CAAC;IAEM,IAAI,CAAC,IAAY,EAAE,QAAkB,EAAE,MAAW;QACrD,SAAS,EAAE;YACP,QAAQ,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;YACtB,IAAI,CAAC,mBAAmB,CAAC,IAAI,EAAE,EAAE,EAAE,MAAM,CAAC,CAAC;QAC/C,CAAC;QACD,IAAI,CAAC,gBAAgB,CAAC,IAAI,EAAE,EAAE,EAAE,MAAM,CAAC,CAAC;IAC5C,CAAC;IAEM,gBAAgB,CAAC,IAAY,EAAE,QAAkB,EAAE,MAAW;QACjE,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,IAAI,EAAE,QAAQ,EAAE,MAAM,CAAC,EAAE;YACxC,IAAI,CAAC,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC;gBAAE,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,GAAG,EAAE,CAAC;YACzD,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,CAAC,QAAQ,EAAE,MAAM,CAAC,CAAC;SAClD;IACL,CAAC;IACM,mBAAmB,CAAC,IAAY,EAAE,QAAkB,EAAE,MAAW;QACpE,IAAI,CAAC,QAAQ,CAAC,IAAI,EAAE,QAAQ,EAAE,MAAM,EAAE,IAAI,CAAC;IAC/C,CAAC;IAEO,QAAQ,CAAC,IAAY,EAAE,QAAkB,EAAE,MAAW,EAAE,SAAkB,KAAK;QACnF,IAAI,GAAG,GAAG,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC;QACjC,IAAI,GAAG,GAAW,CAAC,CAAC;QACpB,KAAK,IAAI,CAAC,IAAI,GAAG,EAAE;YACf,IAAI,CAAC,CAAC,CAAC,CAAC,IAAI,QAAQ,IAAI,CAAC,CAAC,CAAC,CAAC,IAAI,MAAM,EAAE;gBACpC,IAAI,MAAM;oBAAE,GAAG,CAAC,MAAM,CAAC,GAAG,EAAE,CAAC,CAAC;gBAC9B,OAAO,IAAI;aACd;YACD,GAAG,EAAE;SACR;QACD,OAAO,KAAK;IAChB,CAAC;IAEM,IAAI,CAAC,IAAY;QACpB,IAAI,GAAG,GAAG,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC;QACjC,KAAK,IAAI,CAAC,IAAI,GAAG,EAAE;YACf,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;SACnB;IACL,CAAC;IAED,QAAQ;IACD,aAAa;QAChB,OAAO,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;IAChC,CAAC;IAES,IAAI;QACV,IAAI,CAAC,KAAK,GAAG;YACT,CAAC,EAAE,CAAC;YACJ,CAAC,EAAE,CAAC;YACJ,MAAM,EAAE,CAAC;YACT,MAAM,EAAE,CAAC;YACT,OAAO,EAAE,IAAI;YACb,KAAK,EAAE,CAAC;YACR,KAAK,EAAE,CAAC;YACR,MAAM,EAAE,CAAC;YACT,OAAO,EAAE,CAAC;YACV,OAAO,EAAE,CAAC;YACV,MAAM,EAAE,CAAC;YACT,KAAK,EAAE,CAAC;YACR,KAAK,EAAE,CAAC;SACX;QACD,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC;QACrB,IAAI,CAAC,WAAW,GAAG,EAAE,CAAC;QACtB,IAAI,CAAC,MAAM,GAAG,yBAAe,CAAC,qBAAqB,EAAE,CAAC;QACtD,uCAAuC;IAC3C,CAAC;IAES,KAAK;IAEf,CAAC;IAEM,MAAM,CAAC,GAA6B,IAAU,CAAC;IAEtD;;;OAGG;IACI,QAAQ,CAAC,KAAW;QACvB,IAAI,MAAM,GAAG,IAAI,CAAC,YAAY,EAAE,CAAC;QACjC,IAAI,EAAC,CAAC,EAAC,CAAC,EAAC,GAAG,KAAK,CAAC;QAClB,IAAI,EAAC,CAAC,EAAC,CAAC,EAAC,CAAC,EAAC,CAAC,EAAC,CAAC,EAAC,CAAC,EAAC,GAAG,MAAM,CAAC;QAC3B,MAAM,CAAC,OAAO,EAAE,CAAC;QACjB,iBAAiB;QACjB,8CAA8C;QAC9C,2BAA2B;QAC3B,IAAI,GAAG,GAAG,IAAI,CAAC,IAAI,CAAC,CAAC,EAAC,CAAC,EAAC,CAAC,EAAC,CAAC,EAAC,CAAC,EAAC,CAAC,EAAC,CAAC,EAAC,CAAC,CAAC;QACpC,KAAK,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,CAAC,CAAC;QACjB,KAAK,CAAC,CAAC,GAAG,GAAG,CAAC,CAAC,CAAC,CAAC;QACjB,OAAO,KAAK,CAAC;IACjB,CAAC;IAEM,IAAI,CAAC,CAAQ,EAAC,CAAQ,EAAC,CAAQ,EAAC,CAAQ,EAAC,CAAQ,EAAC,CAAQ,EAAC,CAAQ,EAAC,CAAQ;QAC/E,IAAI,CAAC,EAAE,EAAC,EAAE,CAAC,GAAG,CAAC,CAAC,CAAC,EAAC,CAAC,CAAC,CAAC,CAAC;QACtB,IAAG,CAAC,IAAI,CAAC,EAAC;YACN,IAAG,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,EAAC,EAAC,UAAU;aAE9B;iBAAI;gBACD,EAAE,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,GAAC,CAAC,CAAC;gBACf,EAAE,GAAG,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,GAAC,EAAE,CAAC,GAAC,CAAC,CAAC;aACxB;SACL;aAAI;YACD,EAAE,GAAG,CAAC,CAAC,GAAG,CAAC,GAAC,CAAC,CAAC,GAAC,CAAC,GAAG,CAAC,GAAC,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,GAAE,CAAC,GAAE,CAAC,CAAC;YAC5C,EAAE,GAAG,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,GAAG,EAAE,CAAC,GAAC,CAAC,CAAC;SAC3B;QACD,OAAO,CAAC,EAAE,EAAC,EAAE,CAAC,CAAC;IACnB,CAAC;IAEM,OAAO,CAAC,EAAS,EAAC,EAAS;QAC9B,IAAI,EAAC,CAAC,EAAC,CAAC,EAAC,KAAK,EAAC,MAAM,EAAC,OAAO,EAAC,OAAO,EAAC,GAAG,IAAI,CAAC,KAAK;QACnD,OAAO,CAAC,GAAG,OAAO,IAAI,EAAE,IAAI,CAAC,GAAG,KAAK,GAAG,OAAO,IAAI,EAAE;YAC7C,CAAC,GAAG,OAAO,IAAI,EAAE,IAAI,CAAC,GAAG,MAAM,GAAG,OAAO,IAAI,EAAE;IAC3D,CAAC;IAED;;OAEG;IACI,YAAY;QACf,IAAI,IAAI,GAAqB,CAAC,IAAI,CAAC,MAAM,CAAC;QAC1C,IAAI,CAAC,GAAW,IAAI,CAAC;QACrB,OAAM,CAAC,CAAC,MAAM,EAAC;YACX,CAAC,GAAG,CAAC,CAAC,MAAM,CAAC;YACb,IAAG,CAAC,CAAC,QAAQ,EAAC;gBACV,CAAC,CAAC,MAAM,CAAC,UAAU,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,OAAM;gBACnC,CAAC,CAAC,QAAQ,GAAG,KAAK,CAAC;aACtB;YACD,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,MAAM,CAAC;SACtB;QACD,IAAI,MAAM,GAAG,IAAI,CAAC,GAAG,EAAE,CAAC,KAAK,EAAE,CAAC;QAChC,IAAI,CAAiB,CAAC;QACtB,OAAM,CAAC,GAAG,IAAI,CAAC,GAAG,EAAE,EAAC;YACjB,MAAM,CAAC,WAAW,CAAC,CAAC,CAAC;SACxB;QACD,OAAO,MAAM,CAAC;IAClB,CAAC;CACJ;AAvLD,0BAuLC;;;;;;;;;;;;;;;AC/LD;;;GAGG;AACH,MAAqB,MAAM;IAEvB,YAAY,IAAW,CAAC,EAAC,IAAW,CAAC,EAAC,IAAW,CAAC,EAAC,IAAW,CAAC,EAAC,IAAW,CAAC,EAAC,IAAW,CAAC;QACrF,IAAI,CAAC,IAAI,GAAG,CAAC,CAAC,EAAC,CAAC,EAAC,CAAC,EAAC,CAAC,EAAC,CAAC,EAAC,CAAC,CAAC,CAAC;IAC9B,CAAC;IACD,IAAW,CAAC;QACR,OAAO,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;IACvB,CAAC;IACD,IAAW,CAAC,CAAC,CAAQ;QAChB,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC;IACtB,CAAC;IAED,IAAW,CAAC;QACR,OAAO,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;IACvB,CAAC;IACD,IAAW,CAAC,CAAC,CAAQ;QAChB,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC;IACtB,CAAC;IACD,IAAW,CAAC;QACR,OAAO,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;IACvB,CAAC;IACD,IAAW,CAAC,CAAC,CAAQ;QAChB,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC;IACtB,CAAC;IACD,IAAW,CAAC;QACR,OAAO,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;IACvB,CAAC;IACD,IAAW,CAAC,CAAC,CAAQ;QAChB,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC;IACtB,CAAC;IACD,IAAW,CAAC;QACR,OAAO,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;IACvB,CAAC;IACD,IAAW,CAAC,CAAC,CAAQ;QAChB,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC;IACtB,CAAC;IACD,IAAW,CAAC;QACR,OAAO,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;IACvB,CAAC;IACD,IAAW,CAAC,CAAC,CAAQ;QAChB,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC;IACtB,CAAC;IAEM,SAAS,CAAC,IAAW,CAAC,EAAC,IAAW,CAAC,EAAC,IAAW,CAAC,EAAC,IAAW,CAAC,EAAC,IAAW,CAAC,EAAC,IAAW,CAAC;QAC1F,IAAI,CAAC,IAAI,GAAG,CAAC,CAAC,EAAC,CAAC,EAAC,CAAC,EAAC,CAAC,EAAC,CAAC,EAAC,CAAC,CAAC,CAAC;IAC9B,CAAC;IAEM,UAAU;QACb,OAAO,IAAI,CAAC,IAAI,CAAC;IACrB,CAAC;CAGJ;AApDD,yBAoDC;;;;;;;;;;;;;;;ACxDD,uFAA8B;AAC9B,IAAI,IAAI,GAAgB,EAAE,CAAC;AAC3B,MAAqB,KAAM,SAAQ,gBAAM;IACrC,YAAoB,IAAW,CAAC,EAAC,IAAW,CAAC;QACzC,KAAK,CAAC,CAAC,EAAC,CAAC,CAAC,CAAC;IACf,CAAC;IAED,IAAW,CAAC;QACR,OAAO,IAAI,CAAC,CAAC,CAAC;IAClB,CAAC;IAED,IAAW,CAAC,CAAC,CAAQ;QACjB,IAAI,CAAC,CAAC,GAAG,CAAC,CAAC;IACf,CAAC;IAED,IAAW,CAAC;QACR,OAAO,IAAI,CAAC,CAAC,CAAC;IAClB,CAAC;IAED,IAAW,CAAC,CAAC,CAAQ;QACjB,IAAI,CAAC,CAAC,GAAG,CAAC,CAAC;IACf,CAAC;IAED,IAAW,KAAK;QACZ,OAAO,CAAC,IAAI,CAAC,CAAC,EAAC,IAAI,CAAC,CAAC,CAAC,CAAC;IAC3B,CAAC;IAEM,QAAQ,CAAC,IAAW,CAAC,EAAC,IAAY,CAAC;QACtC,IAAI,CAAC,SAAS,CAAC,CAAC,EAAC,CAAC,CAAC,CAAC;IACxB,CAAC;IAED,YAAY;IACL,OAAO;QACV,IAAI,CAAC,SAAS,EAAE,CAAC;QACjB,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;IACpB,CAAC;IAGM,IAAI,CAAC,CAAO;QACf,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;QACnB,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;QACnB,OAAO,IAAI,CAAC;IAChB,CAAC;IACD;;;OAGG;IACI,GAAG,CAAC,KAAW;QAClB,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,IAAI,KAAK,CAAC,CAAC,CAAC;QACxB,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,IAAI,KAAK,CAAC,CAAC,CAAC;QACxB,OAAO,IAAI,CAAC;IAChB,CAAC;IAED,WAAW;IACJ,MAAM,CAAC,WAAW,CAAC,IAAW,CAAC,EAAC,IAAY,CAAC;QAChD,IAAI,KAAK,GAAG,IAAI,CAAC,GAAG,EAAE,IAAI,IAAI,KAAK,EAAE,CAAC;QACtC,KAAK,CAAC,SAAS,CAAC,CAAC,EAAC,CAAC,CAAC,CAAC;QACrB,OAAO,KAAK,CAAC;IACjB,CAAC;CAEJ;AA1DD,wBA0DC;;;;;;;;;;;;;;;AC5DD,uFAA6B;AAG7B,MAAM,OAAO,GAAG,IAAI,CAAC,EAAE,GAAG,GAAG,CAAC;AAC9B,SAAS,GAAG,CAAC,CAAS;IAClB,IAAI,KAAK,GAAG,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,OAAO;IACpC,OAAO,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC;AAC3B,CAAC;AAED,SAAS,GAAG,CAAC,CAAS;IAClB,IAAI,KAAK,GAAG,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,OAAO;IACpC,OAAO,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC;AAC3B,CAAC;AAED,SAAS,GAAG,CAAC,CAAS;IAClB,IAAI,KAAK,GAAG,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,OAAO;IACpC,OAAO,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC;AAC3B,CAAC;AACD;;;;;;;;GAQG;AACH,IAAI,IAAI,GAA2B,EAAE;AACrC,MAAqB,eAAgB,SAAQ,gBAAM;IAO/C,YAAoB,MAAM,GAAG,CAAC,EAAE,KAAK,GAAG,CAAC,EAAE,KAAK,GAAG,CAAC,EAAE,MAAM,GAAG,CAAC,EAAE,OAAO,GAAG,CAAC,EAAE,OAAO,GAAG,CAAC;QACtF,KAAK,CAAC,MAAM,EAAE,KAAK,EAAE,KAAK,EAAE,MAAM,EAAE,OAAO,EAAE,OAAO,CAAC,CAAC;IAC1D,CAAC;IACM,kBAAkB,CAAC,MAAc,EAAE,KAAa,EAAE,KAAa,EAAE,MAAc,EAAE,OAAe,EAAE,OAAe;QACpH,IAAI,CAAC,SAAS,CAAC,MAAM,EAAE,KAAK,EAAE,KAAK,EAAE,MAAM,EAAE,OAAO,EAAE,OAAO,CAAC,CAAC;IACnE,CAAC;IAEM,UAAU,CAAC,KAAmB;QACjC,IAAI,EAAE,MAAM,EAAE,MAAM,EAAE,MAAM,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,EAAE,CAAC,EAAE,GAAG,KAAK,CAAC;QAC/D,IAAI,OAAO,GAAG,GAAG,CAAC,MAAM,CAAC,CAAC;QAC1B,IAAI,OAAO,GAAG,GAAG,CAAC,MAAM,CAAC,CAAC;QAC1B,IAAI,EAAE,GAAG,CAAC,GAAG,MAAM,CAAC;QACpB,IAAI,EAAE,GAAG,CAAC,GAAG,MAAM,CAAC;QACpB,IAAI,CAAC,GAAG,OAAO,GAAG,MAAM,CAAC;QACzB,IAAI,CAAC,GAAG,OAAO,GAAG,MAAM,CAAC;QACzB,IAAI,CAAC,GAAG,CAAC,OAAO,GAAG,MAAM,CAAC;QAC1B,IAAI,CAAC,GAAG,OAAO,GAAG,MAAM,CAAC;QACzB,IAAI,CAAC,SAAS,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,EAAE,CAAC,CAAC;QACnC,0DAA0D;IAC9D,CAAC;IAED;;;OAGG;IACI,WAAW,CAAC,MAAc;QAC7B,IAAI,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,CAAC,GAAG;YAC3B,IAAI,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,GAAG,IAAI,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC;YACrC,IAAI,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,GAAG,IAAI,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC;YACrC,IAAI,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,GAAG,IAAI,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC;YACrC,IAAI,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,GAAG,IAAI,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC;YACrC,IAAI,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,GAAG,IAAI,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,GAAG,IAAI,CAAC,CAAC;YAC9C,IAAI,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,GAAG,IAAI,CAAC,CAAC,GAAG,MAAM,CAAC,CAAC,GAAG,IAAI,CAAC,CAAC;SACjD;QACD,IAAI,CAAC,SAAS,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,CAAC;QACtC,OAAO,IAAI,CAAC;IAChB,CAAC;IAED,OAAO;IACA,gBAAgB,CAAC,KAAY,EAAE,SAAiB,CAAC,EAAE,SAAiB,CAAC;QACxE,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,IAAI,KAAK,CAAC,CAAC,GAAG,MAAM,CAAC;QACjC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,IAAI,KAAK,CAAC,CAAC,GAAG,MAAM,CAAC;IACrC,CAAC;IAEM,KAAK;QACR,OAAO,IAAI,CAAC,IAAI,CAAC;IACrB,CAAC;IAED,uCAAuC;IACvC,yBAAyB;IACzB,yBAAyB;IACzB,8BAA8B;IAC9B,8BAA8B;IAC9B,2BAA2B;IAC3B,2BAA2B;IAC3B,2BAA2B;IAC3B,2BAA2B;IAC3B,4BAA4B;IAC5B,4BAA4B;IAC5B,0CAA0C;IAC1C,0CAA0C;IAC1C,0CAA0C;IAC1C,0CAA0C;IAC1C,4CAA4C;IAC5C,4CAA4C;IAC5C,QAAQ;IACR,mBAAmB;IACnB,IAAI;IAEJ,+CAA+C;IAC/C,sBAAsB;IACtB,8BAA8B;IAC9B,8BAA8B;IAC9B,8BAA8B;IAC9B,QAAQ;IACR,sBAAsB;IACtB,8BAA8B;IAC9B,8BAA8B;IAC9B,8BAA8B;IAC9B,QAAQ;IACR,mBAAmB;IACnB,IAAI;IAEJ,mDAAmD;IACnD,0BAA0B;IAC1B,0BAA0B;IAC1B,mBAAmB;IACnB,IAAI;IAEG,IAAI,CAAC,CAAiB;QACzB,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,CAAC,KAAK,EAAE,CAAC,CAAC;QAC7B,OAAO,IAAI,CAAC;IAChB,CAAC;IACM,KAAK;QACR,OAAO,eAAe,CAAC,qBAAqB,CAAC,GAAG,IAAI,CAAC,KAAK,EAAE,CAAC;IACjE,CAAC;IAEM,OAAO;QACV,IAAI,CAAC,SAAS,EAAE,CAAC;QACjB,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;IACpB,CAAC;IACM,MAAM,CAAC,qBAAqB,CAAC,MAAM,GAAG,CAAC,EAAE,KAAK,GAAG,CAAC,EAAE,KAAK,GAAG,CAAC,EAAE,MAAM,GAAG,CAAC,EAAE,OAAO,GAAG,CAAC,EAAE,OAAO,GAAG,CAAC;QACtG,IAAI,MAAM,GAAoB,IAAI,CAAC,GAAG,EAAE,IAAI,IAAI,eAAe,EAAE,CAAC;QAClE,MAAM,CAAC,kBAAkB,CAAC,MAAM,EAAE,KAAK,EAAE,KAAK,EAAE,MAAM,EAAE,OAAO,EAAE,OAAO,CAAC,CAAC;QAC1E,OAAO,MAAM,CAAC;IAClB,CAAC;CAEJ;AAlHD,kCAkHC;;;;;;;;;;;;;;;AC3ID,oGAA2C;AAG3C,6GAAkD;AAKlD,MAAM,IAAI;IAEN;QACI,IAAI,CAAC,KAAK,GAAG,IAAI,mBAAS,EAAE,CAAC;QAC7B,IAAI,CAAC,KAAK,EAAE,CAAC;QACb,IAAI,CAAC,IAAI,EAAE;IACf,CAAC;IAEO,KAAK;QACT,IAAI,qBAAqB,GAAG,MAAM,CAAC,qBAAqB,CAAC;QACzD,IAAI,IAAI,GAAG,GAAE,EAAE;YACX,IAAI,CAAC,KAAK,CAAC,SAAS,EAAE,CAAC;YACvB,qBAAqB,CAAC,IAAI,CAAC,CAAC;QAChC,CAAC;QACD,IAAI,EAAE,CAAC;IACX,CAAC;IAEO,IAAI;QACR,+BAA+B;QAC/B,iBAAiB;QACjB,iBAAiB;QACjB,6BAA6B;QAE7B,IAAI,EAAE,GAAG,IAAI,gBAAM,EAAE,CAAC;QACtB,EAAE,CAAC,GAAG,GAAG,cAAc;QACvB,IAAI,CAAC,KAAK,CAAC,WAAW,CAAC,EAAE,CAAC,CAAC;QAE3B,IAAI,CAAC,GAAG,IAAI,gBAAM,EAAE,CAAC;QACrB,CAAC,CAAC,GAAG,GAAG,cAAc;QACtB,CAAC,CAAC,KAAK,CAAC,CAAC,GAAG,CAAC,CAAC;QACd,CAAC,CAAC,KAAK,CAAC,CAAC,GAAG,CAAC,CAAC;QACd,CAAC,CAAC,KAAK,CAAC,MAAM,GAAG,EAAE,CAAC;QACpB,CAAC,CAAC,KAAK,CAAC,OAAO,GAAG,GAAG,CAAC;QACtB,CAAC,CAAC,KAAK,CAAC,OAAO,GAAG,EAAE;QACpB,IAAI,CAAC,KAAK,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC;QAG1B,wBAAwB;QACxB,uBAAuB;QACvB,wBAAwB;QACxB,uBAAuB;QACvB,oBAAoB;QACpB,sBAAsB;QACtB,sBAAsB;QACtB,+BAA+B;QAC/B,kBAAkB;QAClB,+BAA+B;QAC/B,sBAAsB;QACtB,iCAAiC;QACjC,sBAAsB;QACtB,yBAAyB;QACzB,uBAAuB;QACvB,uBAAuB;QACvB,oBAAoB;QACpB,uBAAuB;QACvB,QAAQ;QACR,mBAAmB;QACnB,gCAAgC;QAChC,oBAAoB;QACpB,sBAAsB;QACtB,wBAAwB;QACxB,qBAAqB;QACrB,wBAAwB;QACxB,oBAAoB;QACpB,mBAAmB;QACnB,QAAQ;IAGZ,CAAC;CACJ;AAED,IAAI,IAAI,EAAE,CAAC","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/index.ts\");\n","import {DOMBase,DOMContainer} from \"./DOMBase\"\r\n/**容器类 */\r\nexport default class CDOMContainer extends DOMBase implements DOMContainer{\r\n    public parent:DOMContainer\r\n    public children:DOMBase[] = [];\r\n    public appendChild(child:DOMBase):this{\r\n        if(child.parent == this) return this;\r\n        child.removeSelf();\r\n        this.children.push(child);\r\n        child.parent = this;\r\n        return this;\r\n    }\r\n    public removeChild(child:DOMBase):this{\r\n        if(child.parent == void 0) return this;\r\n        let index = this.children.indexOf(child)\r\n        this.children.splice(index,1);\r\n        child.parent = null;\r\n        return this;\r\n    }\r\n}","import CDOMContainer from \"./CDOMContainer\"\r\nimport { DOMBase } from \"./DOMBase\"\r\nimport Point from \"../math/Point\";\r\n/**虚拟文本 */\r\nexport default class CDocument extends CDOMContainer {\r\n    private reRenderDeep: number;//需要重新渲染的深度\r\n    private canvas:HTMLCanvasElement \r\n    private context:CanvasRenderingContext2D;\r\n    constructor() {\r\n        super();\r\n        this.parent = null;\r\n    }\r\n\r\n    private initCanvas():void{\r\n        let canvas = document.createElement(\"canvas\");\r\n        this.canvas = canvas\r\n        canvas.width = 1000;\r\n        canvas.height = 600;\r\n        canvas.id = \"canvas\"\r\n        canvas.addEventListener(\"mousedown\",(e)=>{\r\n            let x = e.clientX\r\n            let y = e.clientY\r\n            let list = this.iterator(this.children,(v)=>{\r\n                let p = v.toGlobal(Point.createPiont(x,y))\r\n                let res = v.contain(p.x,p.y) \r\n                p.release();\r\n                if(res){\r\n                    return this;\r\n                }\r\n                // return undefined;\r\n            })\r\n            console.log(list)\r\n            \r\n        })\r\n        document.body.appendChild(canvas);\r\n        this.context = canvas.getContext(\"2d\");\r\n    }\r\n\r\n    public init(): void {\r\n        super.init();\r\n        this.initCanvas();\r\n        this.deep = 1;\r\n    }\r\n\r\n    private iterator<T>(loot:Array<DOMBase>,fn:(e:DOMBase)=>T):T[]{\r\n        let res = [];\r\n        for(let i:number = 0, e :any ;e = loot[i];i++){\r\n            res.push(fn(e))\r\n            if(e[\"children\"]){\r\n                res.push(...this.iterator(e[\"children\"],fn));\r\n            }\r\n        }\r\n        return res;\r\n    }\r\n\r\n    \r\n\r\n    public getElementById(id: string): DOMBase {\r\n        let loop = this.children;\r\n        return (this.iterator<DOMBase>(loop,(e)=>{return e})[0])\r\n    }\r\n\r\n    public getElementsByClassName(id: string): DOMBase[] {\r\n        return\r\n    }\r\n\r\n    //判断重新渲染深度\r\n    public changeReRenderDeep(deep: number): void {\r\n        this.reRenderDeep = this.reRenderDeep > deep ? deep : this.reRenderDeep;\r\n    }\r\n\r\n    //内部计算并且渲染\r\n    public sysRender():void{\r\n        //todo\r\n        this.context.setTransform(1,0,0,1,0,0)\r\n        this.context.clearRect(0,0,this.canvas.width,this.canvas.height)\r\n        let loot = this.children;\r\n        let anc = 0\r\n        let fn = (e:DOMBase)=>{\r\n            //重新计算需要重绘的数据\r\n            if(e.reRender) {\r\n                let style = e.style\r\n                e.matrix.setByStyle(style);//转换矩阵\r\n                e.reRender = false;\r\n            }\r\n            ///-------test------------\r\n            // e.matrix.setMatrix(2,0,0,1,112,100)\r\n            //-----------------------\r\n            if(e.parent instanceof CDocument){\r\n                this.context.setTransform(...e.matrix.value());\r\n            }else{\r\n                this.context.transform(...e.matrix.value());\r\n            }\r\n            e.render(this.context);\r\n        }\r\n        // let t = Date.now()\r\n        this.iterator(loot,fn);\r\n        // console.log(Date.now() - t)\r\n    }\r\n}","import {DOMBase,DOMStyleBase} from \"./DOMBase\"\r\nexport default class CImage extends DOMBase{\r\n    private _src:string\r\n    public treasure:HTMLImageElement;\r\n    public get src():string{\r\n        return this._src;\r\n    }\r\n\r\n    public set src(url:string){\r\n        if(this._src != url){\r\n            this._src = url;\r\n            this.treasure.src = url;\r\n            let _t = this;\r\n            function load(){\r\n                _t.style.width = this.width;\r\n                _t.style.height = this.height;\r\n                _t.treasure.removeEventListener(\"load\",load);\r\n                _t.treasure.removeEventListener(\"error\",err);\r\n                !_t.reRender && (_t.reRender = true);\r\n            }\r\n            function err(e:Event){\r\n                console.error(e);\r\n                _t.treasure.removeEventListener(\"load\",load);\r\n                _t.treasure.removeEventListener(\"error\",err);\r\n            }\r\n            this.treasure.addEventListener(\"load\",load);\r\n            this.treasure.addEventListener(\"error\",err);\r\n        }\r\n    }\r\n\r\n    constructor(){\r\n        super();\r\n        this.type = \"CImage\";\r\n        this.treasure = new Image();\r\n    }\r\n    public render(ctx:CanvasRenderingContext2D):void{\r\n        let {width,height,x,y,anchorX,anchorY} = this.style\r\n        ctx.drawImage(this.treasure,anchorX,anchorY);\r\n        \r\n    }\r\n\r\n\r\n}\r\n\r\n","import TransformMatrix from \"../math/TransformMatrix\";\r\nimport Point from \"../math/Point\";\r\nimport Matrix from \"../math/Matrix\";\r\n\r\n/**\r\n * 基础DOM\r\n */\r\nlet hashCode:number = 0;\r\nexport abstract class DOMBase {\r\n    public type: string\r\n    public _style: DOMStyleBase\r\n    public className: string\r\n    public id: string\r\n    public parent: DOMContainer\r\n    protected listenerMap: { [key: string]: [Function, any][] }\r\n    public reRender: boolean;//重绘标志\r\n    protected proxy: DOMStyleBase\r\n    protected deep: number\r\n    public matrix: TransformMatrix\r\n    // public position: Point;//全局坐标\r\n    public hashCode:number\r\n    public get style() {\r\n        return this.proxy;\r\n    }\r\n    public set style(v) {\r\n        this._style = v;\r\n    }\r\n    //留下的扩展接口\r\n    protected proxyHandle: Function = <k extends keyof DOMStyleBase>(target: DOMStyleBase, key: k, newData: DOMStyleBase[k], proxy: DOMStyleBase) => { }\r\n    constructor() {\r\n        this.hashCode = hashCode++\r\n        this.init();\r\n        let self = this;\r\n        this.proxy = new Proxy(this._style, {\r\n            set<k extends keyof DOMStyleBase>(target: DOMStyleBase, key: k, newData: DOMStyleBase[k], proxy: DOMStyleBase): any {\r\n                if (target[key] != newData) {\r\n                    target[key] = newData;\r\n                    if (!self.reRender) self.reRender = true;\r\n                    self.proxyHandle(target, key, newData, proxy);\r\n                   \r\n                }\r\n                return true\r\n            }\r\n        })\r\n\r\n    }\r\n\r\n\r\n    public appendTo(parent: DOMContainer): this {\r\n        parent.appendChild(this);\r\n        return this;\r\n    }\r\n    public removeSelf(): this {\r\n        if (this.parent) {\r\n            this.parent.removeChild(this);\r\n            return this;\r\n        }\r\n    }\r\n\r\n    public once(type: string, listener: Function, caller: any): void {\r\n        function fn() {\r\n            listener.call(caller);\r\n            this.removeEventListener(type, fn, caller);\r\n        }\r\n        this.addEventListener(type, fn, caller);\r\n    }\r\n\r\n    public addEventListener(type: string, listener: Function, caller: any): void {\r\n        if (!this.hasEvent(type, listener, caller)) {\r\n            if (!this.listenerMap[type]) this.listenerMap[type] = [];\r\n            this.listenerMap[type].push([listener, caller])\r\n        }\r\n    }\r\n    public removeEventListener(type: string, listener: Function, caller: any): void {\r\n        this.hasEvent(type, listener, caller, true)\r\n    }\r\n\r\n    private hasEvent(type: string, listener: Function, caller: any, remove: boolean = false): boolean {\r\n        let map = this.listenerMap[type];\r\n        let idx: number = 0;\r\n        for (let i of map) {\r\n            if (i[0] == listener && i[1] == caller) {\r\n                if (remove) map.splice(idx, 1)\r\n                return true\r\n            }\r\n            idx++\r\n        }\r\n        return false\r\n    }\r\n\r\n    public emit(type: string): void {\r\n        let map = this.listenerMap[type];\r\n        for (let i of map) {\r\n            i[0].call(i[1]);\r\n        }\r\n    }\r\n\r\n    //判断是否重绘\r\n    public checkReRender(): boolean {\r\n        return this.reRender = true;\r\n    }\r\n\r\n    protected init(): void {\r\n        this.style = {\r\n            x: 0,\r\n            y: 0,\r\n            scaleX: 1,\r\n            scaleY: 1,\r\n            visible: true,\r\n            alpha: 1,\r\n            width: 0,\r\n            height: 0,\r\n            anchorX: 0,\r\n            anchorY: 0,\r\n            rotate: 0,\r\n            skewX: 0,\r\n            skewY: 0,\r\n        }\r\n        this.reRender = true;\r\n        this.listenerMap = {};\r\n        this.matrix = TransformMatrix.createTransFormMatrix();\r\n        // this.position = Point.createPiont();\r\n    }\r\n\r\n    protected reset(): void {\r\n\r\n    }\r\n\r\n    public render(ctx: CanvasRenderingContext2D): void { }\r\n\r\n    /**\r\n     * 把处于当前坐标系的point点装换为全局的坐标\r\n     * @param point \r\n     */\r\n    public toGlobal(point:Point):Point{\r\n        let matrix = this.getMatrixMul();\r\n        let {x,y} = point;\r\n        let {a,b,c,d,e,f} = matrix;\r\n        matrix.release();\r\n        // let tempY = y;\r\n        // y = ((x - e)/a - (tempY - f)/b)/(c/a - d/b)\r\n        // x = (tempY - f  - d*y)/b\r\n        let res = this.calc(a,b,c,d,e,f,x,y)\r\n        point.x = res[0];\r\n        point.y = res[1];\r\n        return point;\r\n    }\r\n\r\n    public calc(a:number,b:number,c:number,d:number,e:number,f:number,x:number,y:number){\r\n        let [_x,_y] = [-1,-1];\r\n        if(a == 0){\r\n            if(b == 0 || c == 0){//一般为不可能事件\r\n                \r\n            }else{\r\n                _y = (x - e)/c;\r\n                _x = (y - f - c*_y)/b;\r\n             }\r\n        }else{\r\n            _y = (y - a*(b*x - b*e) - f) / (d - b* c /a)\r\n            _x = (x - e - c * _y)/a;\r\n        }\r\n        return [_x,_y];\r\n    }\r\n\r\n    public contain(_x:number,_y:number):boolean{\r\n        let {x,y,width,height,anchorX,anchorY} = this.style\r\n        return x - anchorX <= _x && x + width - anchorX >= _x &&\r\n                y - anchorY <= _y && y + height - anchorY <= _y\r\n    }\r\n\r\n    /**\r\n     * 获取该对象当前的转化矩阵\r\n     */\r\n    public getMatrixMul():TransformMatrix{\r\n        let temp:TransformMatrix[] = [this.matrix]\r\n        let t:DOMBase = this;\r\n        while(t.parent){\r\n            t = t.parent;\r\n            if(t.reRender){\r\n                t.matrix.setByStyle(t.style);//转换矩阵\r\n                t.reRender = false;\r\n            }\r\n            temp.push(t.matrix)\r\n        }\r\n        let matrix = temp.pop().clone();\r\n        let m:TransformMatrix;\r\n        while(m = temp.pop()){\r\n            matrix.MatrixMulti(m)\r\n        }\r\n        return matrix;\r\n    }\r\n}\r\n\r\n// interface DOMType {\r\n//     CDocument: string\r\n//     DOMBase: string\r\n//     CImage: string\r\n// }\r\n\r\n\r\nexport interface DOMStyleBase {\r\n    x: number\r\n    y: number\r\n    scaleX: number\r\n    scaleY: number\r\n    visible: boolean\r\n    alpha: number\r\n    width: number\r\n    height: number\r\n    anchorX: number\r\n    anchorY: number\r\n    rotate: number\r\n    skewX: number\r\n    skewY: number\r\n}\r\n\r\n// interface DOMStyleBaseKeyOf{\r\n//     \"x\":number\r\n//     \"y\":number\r\n//     \"scaleX\":number\r\n//     \"scaleY\":number\r\n//     \"visible\":boolean\r\n//     \"alpha\":number\r\n//     \"width\":number\r\n//     \"height\":number\r\n// }\r\n\r\n/**可以添加其上的DOM节点 */\r\nexport interface DOMContainer extends DOMBase {\r\n    parent: DOMContainer\r\n    children: DOMBase[]\r\n    appendChild(child: DOMBase): this\r\n    removeChild(child: DOMBase): this\r\n}","/**\r\n * 矩阵数据结构\r\n * 用于模拟多种数据\r\n */\r\nexport default class Matrix{\r\n    protected data:[number,number,number,number,number,number]\r\n    constructor(a:number = 0,b:number = 0,c:number = 0,d:number = 0,e:number = 0,f:number = 0){\r\n        this.data = [a,b,c,d,e,f];\r\n    }\r\n    public get a():number{\r\n        return this.data[0]\r\n    }\r\n    public set a(v:number){\r\n         this.data[0] = v;\r\n    }\r\n\r\n    public get b():number{\r\n        return this.data[1]\r\n    }\r\n    public set b(v:number){\r\n         this.data[1] = v;\r\n    }\r\n    public get c():number{\r\n        return this.data[2]\r\n    }\r\n    public set c(v:number){\r\n         this.data[2] = v;\r\n    }\r\n    public get d():number{\r\n        return this.data[3]\r\n    }\r\n    public set d(v:number){\r\n         this.data[3] = v;\r\n    }\r\n    public get e():number{\r\n        return this.data[4]\r\n    }\r\n    public set e(v:number){\r\n         this.data[4] = v;\r\n    }\r\n    public get f():number{\r\n        return this.data[5]\r\n    }\r\n    public set f(v:number){\r\n         this.data[5] = v;\r\n    }\r\n\r\n    public setMatrix(a:number = 0,b:number = 0,c:number = 0,d:number = 0,e:number = 0,f:number = 0):void{\r\n        this.data = [a,b,c,d,e,f];\r\n    }\r\n\r\n    public getMartrix():[number,number,number,number,number,number]{\r\n        return this.data;\r\n    }\r\n\r\n\r\n}","import Matrix  from \"./Matrix\"\r\nlet pool:Array<Point> = [];\r\nexport default class Point extends Matrix{\r\n    private constructor(x:number = 0,y:number = 0){\r\n        super(x,y);\r\n    }\r\n\r\n    public get x():number{\r\n        return this.a;\r\n    }\r\n\r\n    public set x(v:number){\r\n        this.a = v;\r\n    }\r\n\r\n    public get y():number{\r\n        return this.b;\r\n    }\r\n\r\n    public set y(v:number){\r\n        this.b = v;\r\n    }\r\n\r\n    public get value():[number,number]{\r\n        return [this.a,this.b];\r\n    }\r\n\r\n    public setPoint(x:number = 0,y :number = 0):void{\r\n        this.setMatrix(x,y); \r\n    }\r\n\r\n    /**回收进对象池 */\r\n    public release():void{\r\n        this.setMatrix();\r\n        pool.push(this);\r\n    }\r\n\r\n    \r\n    public copy(p:Point):this{\r\n        this.data[0] = p.x;\r\n        this.data[1] = p.y;\r\n        return this;\r\n    }\r\n    /**\r\n     * 两点叠加，可实现平移或者坐标系转化\r\n     * @param point \r\n     */\r\n    public add(point:Point):this{\r\n        this.data[0] += point.x;\r\n        this.data[1] += point.y;\r\n        return this;\r\n    }\r\n\r\n    /**创建点对象 */\r\n    public static createPiont(x:number = 0,y :number = 0):Point{\r\n        let point = pool.pop() || new Point();\r\n        point.setMatrix(x,y);\r\n        return point;\r\n    }\r\n\r\n}","import Matrix from \"./Matrix\"\r\nimport { DOMStyleBase } from \"../DOM/DOMBase\"\r\nimport Point from \"./Point\";\r\nconst anglePI = Math.PI / 180;\r\nfunction sin(r: number) {\r\n    let angle = r == 0 ? 0 : r * anglePI\r\n    return Math.sin(angle);\r\n}\r\n\r\nfunction cos(r: number) {\r\n    let angle = r == 0 ? 0 : r * anglePI\r\n    return Math.cos(angle);\r\n}\r\n\r\nfunction tan(r: number) {\r\n    let angle = r == 0 ? 0 : r * anglePI\r\n    return Math.tan(angle);\r\n}\r\n/**\r\n * 装换矩阵\r\n * a 水平缩放绘图\r\n * b 水平倾斜绘图\r\n * c 垂直倾斜绘图\r\n * d 垂直缩放绘图\r\n * e 水平移动绘图\r\n * f 垂直移动绘图\r\n */\r\nlet pool: Array<TransformMatrix> = []\r\nexport default class TransformMatrix extends Matrix {\r\n    public scaleX: number\r\n    public scaleY: number\r\n    public skewX: number\r\n    public skewY: number\r\n    public offsetX: number\r\n    public offsetY: number\r\n    private constructor(scaleX = 1, skewX = 0, skewY = 0, scaleY = 1, offsetX = 0, offsetY = 0) {\r\n        super(scaleX, skewX, skewY, scaleY, offsetX, offsetY);\r\n    }\r\n    public setTransformMatrix(scaleX: number, skewX: number, skewY: number, scaleY: number, offsetX: number, offsetY: number): void {\r\n        this.setMatrix(scaleX, skewX, skewY, scaleY, offsetX, offsetY);\r\n    }\r\n\r\n    public setByStyle(style: DOMStyleBase): void {\r\n        let { rotate, scaleX, scaleY, anchorX, anchorY, x, y } = style;\r\n        let rotateC = cos(rotate);\r\n        let rotateS = sin(rotate);\r\n        let tx = x * scaleX;\r\n        let ty = y * scaleY;\r\n        let a = rotateC * scaleX;\r\n        let b = rotateS * scaleX;\r\n        let c = -rotateS * scaleY;\r\n        let d = rotateC * scaleY;\r\n        this.setMatrix(a, b, c, d, tx, ty);\r\n        // this.translate(x,y).rotate(rotate).scale(scaleX,scaleY)\r\n    }\r\n\r\n    /**\r\n     * 矩阵乘法，物理意义，实现物体的矩阵的叠加变换\r\n     * @param target 叠加的矩阵\r\n     */\r\n    public MatrixMulti(target: Matrix): this {\r\n        let [a2, b2, c2, d2, e2, f2] = [\r\n            this.a * target.a + this.c * target.b,\r\n            this.b * target.a + this.d * target.b,\r\n            this.a * target.c + this.c * target.d,\r\n            this.b * target.c + this.d * target.d,\r\n            this.a * target.e + this.c * target.f + this.e,\r\n            this.b * target.e + this.d * target.f + this.f\r\n        ]\r\n        this.setMatrix(a2, b2, c2, d2, e2, f2)\r\n        return this;\r\n    }\r\n\r\n    //转换坐标系\r\n    public changeCoordinate(point: Point, scaleX: number = 1, scaleY: number = 1): void {\r\n        this.data[4] += point.x * scaleX;\r\n        this.data[5] += point.y * scaleY;\r\n    }\r\n\r\n    public value(): [number, number, number, number, number, number] {\r\n        return this.data;\r\n    }\r\n\r\n    // public rotate(angle: number): this {\r\n    //     // angle = +angle;\r\n    //     if (angle !== 0) {\r\n    //         let u = cos(angle);\r\n    //         let v = sin(angle);\r\n    //         let ta = this.a;\r\n    //         let tb = this.b;\r\n    //         let tc = this.c;\r\n    //         let td = this.d;\r\n    //         let ttx = this.e;\r\n    //         let tty = this.f;\r\n    //         this.data[0] = ta * u - tb * v;\r\n    //         this.data[1] = ta * v + tb * u;\r\n    //         this.data[2] = tc * u - td * v;\r\n    //         this.data[3] = tc * v + td * u;\r\n    //         this.data[4] = ttx * u - tty * v;\r\n    //         this.data[5] = ttx * v + tty * u;\r\n    //     }\r\n    //     return this;\r\n    // }\r\n\r\n    // public scale(sx: number, sy: number): this {\r\n    //     if (sx !== 1) {\r\n    //         this.data[0] *= sx;\r\n    //         this.data[2] *= sx;\r\n    //         this.data[4] *= sx;\r\n    //     }\r\n    //     if (sy !== 1) {\r\n    //         this.data[1] *= sy;\r\n    //         this.data[3] *= sy;\r\n    //         this.data[5] *= sy;\r\n    //     }\r\n    //     return this;\r\n    // }\r\n\r\n    // public translate(dx: number, dy: number): this {\r\n    //     this.data[4] += dx;\r\n    //     this.data[5] += dy;\r\n    //     return this;\r\n    // }\r\n\r\n    public copy(m:TransformMatrix):this{\r\n        this.setMatrix(...m.value());\r\n        return this;\r\n    }\r\n    public clone():TransformMatrix{\r\n        return TransformMatrix.createTransFormMatrix(...this.value())\r\n    }\r\n\r\n    public release():void{\r\n        this.setMatrix();\r\n        pool.push(this);\r\n    }\r\n    public static createTransFormMatrix(scaleX = 1, skewX = 0, skewY = 0, scaleY = 1, offsetX = 0, offsetY = 0): TransformMatrix {\r\n        let Matrix: TransformMatrix = pool.pop() || new TransformMatrix();\r\n        Matrix.setTransformMatrix(scaleX, skewX, skewY, scaleY, offsetX, offsetY);\r\n        return Matrix;\r\n    }\r\n\r\n}","import { HashMap } from \"./mapUtil/HashMap\"\r\nimport { ObjPool } from \"./object/ObjPool\"\r\nimport { TextParser } from \"./parser/TextParser\"\r\nimport CImage from \"./canvasDOM/DOM/CImage\"\r\nimport Box from \"./canvasDOM/math/Box\"\r\nimport TransformMatrix from \"./canvasDOM/math/TransformMatrix\";\r\nimport CDocument from \"./canvasDOM/DOM/CDocument\";\r\nimport CDOMContainer from \"./canvasDOM/DOM/CDOMContainer\";\r\nimport CText from \"./canvasDOM/DOM/CText\";\r\nimport { throttle } from \"./canvasDOM/global/Global\";\r\n\r\nclass Main {\r\n    private stage: CDocument\r\n    constructor() {\r\n        this.stage = new CDocument();\r\n        this.start();\r\n        this.test()\r\n    }\r\n\r\n    private start():void{\r\n        let requestAnimationFrame = window.requestAnimationFrame;\r\n        let loop = ()=>{\r\n            this.stage.sysRender();\r\n            requestAnimationFrame(loop);\r\n        }\r\n        loop();\r\n    }\r\n\r\n    private test(): void {\r\n        // let g = new CDOMContainer();\r\n        // g.style.x = 50\r\n        // g.style.y = 50\r\n        // this.stage.appendChild(g);\r\n\r\n        let i1 = new CImage();\r\n        i1.src = \"./test1.jpeg\"\r\n        this.stage.appendChild(i1);\r\n\r\n        let i = new CImage();\r\n        i.src = \"./test1.jpeg\"\r\n        i.style.x = 0;\r\n        i.style.y = 0;\r\n        i.style.rotate = 45;\r\n        i.style.anchorX = 112;\r\n        i.style.anchorY = 84\r\n        this.stage.appendChild(i);\r\n\r\n   \r\n        // let p = new CImage();\r\n        // p.src = \"./test.png\"\r\n        // p.style.anchorX = 50;\r\n        // p.style.anchorY = 50\r\n        // g.appendChild(p);\r\n        // let t = new CText()\r\n        // t.style.text = \"你好\"\r\n        // t.style.fontFamily = \"Arial\"\r\n        // t.style.x = 300\r\n        // t.style.textColor = 0xFFF9E2\r\n        // t.style.border = 2;\r\n        // t.style.borderColor = 0x000000\r\n        // t.style.rotate = 30\r\n        // t.style.fontSize = 30;\r\n        // t.style.anchorX = 30\r\n        // t.style.anchorY = 15\r\n        // setInterval(()=>{\r\n        //     g.style.rotate++\r\n        // },10)\r\n        // g.appendChild(t)\r\n        // let g1 = new CDOMContainer();\r\n        // g.appendChild(g1)\r\n        // let i2 = new CImage\r\n        // i2.src = \"./test.png\"\r\n        // g1.appendChild(i2)\r\n        // i2.style.scaleX = .5;\r\n        // setInterval(()=>{\r\n        //     i2.style.x++\r\n        // },10)\r\n  \r\n\r\n    }\r\n}\r\n\r\nnew Main();"],"sourceRoot":""}